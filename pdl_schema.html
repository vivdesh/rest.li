<!DOCTYPE html>
<html lang="en">

  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-128576866-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-128576866-1');
    </script>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>

    <title>PDL Schema</title>
    <meta name="description" content="Documentation of Pegasus schemas and specification of the PDL syntax." />

    <link rel="icon" type="image/png" href="/rest.li/assets/images/icon_pegasus.png">
  
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" type="text/css" media="screen,projection" href="/rest.li/assets/css/main.css">
    <link rel="canonical" href="/rest.li/pdl_schema" />
    <link rel="alternate" type="application/rss+xml" title="rest.li" href="/rest.li/feed.xml" />

    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">

    <script src="//code.jquery.com/jquery-3.0.0.min.js"></script>
    <script src="/rest.li/assets/js/search-input.js"></script>
    

    
    <script>
       $(function() {
          $("h1").addClass("no_toc");
       });
    </script>
</head>


  <body>

    <nav class="dark-grey" role="navigation">
    <div class="nav-wrapper container"><a id="logo-container" class="brand-logo" href="/rest.li/">Rest.li</a>
      <ul class="right hide-on-med-and-down">
        
        <li>
          <a href="/rest.li/get_started/quick_start" >
            Getting Started
          </a>
        </li>
        
        <li>
          <a href="/rest.li/user_guide/server_architecture" >
            User Guide
          </a>
        </li>
        
        <li>
          <a href="/rest.li/spec/protocol" >
            API Reference
          </a>
        </li>
        
        <li>
          <a href="/rest.li/contribute/howto" >
            Contribute
          </a>
        </li>
        
          <li>
            <div class="center row" >
              <div class="col s12 ">
                <div class="row">
                  <div class="input-field col s6 s12 min">
                      <i id="search-txt" class="material-icons prefix">search</i>
                      <input type="text" id="search-input">
                    </div>
                  </div>
                </div>
              </div>
          </li>
          <li>
              <a id="github-menu" href="http://github.com/linkedin/rest.li/" >
                   <i class="fa fa-github"></i>
                </a>
          </li>
          </ul>
      <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
    </div>
</nav>



        <div class="container">
        <div class="row">
                <div class="col s12 m4 l3"> 
               
                    
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">User Guide</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/user_guide/server_architecture">Rest.li Architecture</a></li>
                       
                         <li><a href="/rest.li/user_guide/restli_server">Rest.li Server</a></li>
                       
                         <li><a href="/rest.li/user_guide/restli_client">Rest.li Client Framework</a></li>
                       
                         <li><a href="/rest.li/user_guide/unstructured_data">Unstructured Data</a></li>
                       
                         <li><a href="/rest.li/Components">Components</a></li>
                       
                         <li><a href="/rest.li/Asynchronous-Servers-and-Clients-in-Rest_li">Asynchronous in Rest.li</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">Data Schemas</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/pdl_schema">PDL Schema</a></li>
                       
                         <li><a href="/rest.li/pdsc_syntax">PDSC Syntax</a></li>
                       
                         <li><a href="/rest.li/pdl_migration">Migrating from PDSC to PDL</a></li>
                       
                         <li><a href="/rest.li/avro_translation">Avro Translation</a></li>
                       
                         <li><a href="/rest.li/java_binding">Java Binding</a></li>
                       
                         <li><a href="/rest.li/annotation_processor">Schema Annotation Processor</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">Modeling Resources</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/modeling/modeling">Modeling Resources</a></li>
                       
                         <li><a href="/rest.li/modeling/compatibility_check">Snapshots and Resource Compatibility Checking</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">Data</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/how_data_is_serialized_for_transport">How Data is Serialized for Transport</a></li>
                       
                         <li><a href="/rest.li/how_data_is_represented_in_memory">How Data is Represented in Memory</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">Main concepts</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/Rest_li-Filters">Filters</a></li>
                       
                         <li><a href="/rest.li/Projections">Projections</a></li>
                       
                         <li><a href="/rest.li/pathspec">PathSpecs</a></li>
                       
                         <li><a href="/rest.li/Validation-in-Rest_li">Validation</a></li>
                       
                         <li><a href="/rest.li/Attachment-Streaming">Attachment Streaming</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">Mutli-language</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/multi_language_compatibility_matrix">Compatibility Matrix</a></li>
                       
                         <li><a href="/rest.li/test_suite">Test Suite</a></li>
                       
                         <li><a href="https://github.com/mchen07/restli-csharp">C#</a></li>
                       
                         <li><a href="/rest.li/Scala-Integration">Scala Integration</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">Testing</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/Writing-unit-tests-for-Rest_li-clients-and-servers">Writing Unit Tests</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">How to</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/Send-Rest_li-Request-Query-In-Request-Body">Send Request Query in the Body</a></li>
                       
                         <li><a href="/rest.li/How-to-use-projections-in-Java">Use Projections</a></li>
                       
                         <li><a href="/rest.li/Rest_li_Avro_conversions">Avro Conversion</a></li>
                       
                         <li><a href="/rest.li/Compression">Compression</a></li>
                       
                         <li><a href="/rest.li/Rest_li-2_x-upgrade-instructions">Migrate to Rest.li 2.x</a></li>
                       
                         <li><a href="/rest.li/testsuite_how_to">Test Suite</a></li>
                       
                         <li><a href="/rest.li/howto_add_new_language">Test Suite - Add New Language</a></li>
                       
                         <li><a href="/rest.li/user_guide/service_errors_java">Configure Service Errors in Java</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">FAQ</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/Data-FAQ">Rest.li - FAQ</a></li>
                       
                         <li><a href="/rest.li/testsuite_troubleshooting">Test Suite - Troubleshooting</a></li>
                       
                        </ul>
                     </ul>
                        
                    </div>
                     <div class="markdown-body col s12 m3 l9">
                            <h1 id="pdl-schema">PDL Schema</h1>

<h2 id="contents">Contents</h2>
<ul>
  <li><a href="#pdl-schema-definition">PDL Schema Definition</a></li>
  <li><a href="#creating-a-schema">Creating a Schema</a></li>
  <li><a href="#record-type">Record Type</a></li>
  <li><a href="#primitive-types">Primitive Types</a></li>
  <li><a href="#enum-type">Enum Type</a></li>
  <li><a href="#array-type">Array Type</a></li>
  <li><a href="#map-type">Map Type</a></li>
  <li><a href="#union-type">Union Type</a></li>
  <li><a href="#typeref">Typeref</a></li>
  <li><a href="#fixed-type">Fixed Type</a></li>
  <li><a href="#imports">Imports</a></li>
  <li><a href="#properties">Properties</a></li>
  <li><a href="#package">Package</a></li>
  <li><a href="#escaping">Escaping</a></li>
</ul>

<h2 id="pdl-schema-definition">PDL Schema Definition</h2>

<p>Pegasus is a schema definition and serialization system developed as part of
the Rest.li framework. It provides <a href="https://linkedin.github.io/rest.li/multi_language_compatibility_matrix">multi-language
support</a>
for services built using Rest.li and handles seemless serialization and
deserialization of data between server and clients.</p>

<p>PDL is a schema definition language for Pegasus, developed
as a user friendly and concise format replacement for the older JSON based
<a href="https://linkedin.github.io/rest.li/pdsc_syntax">PDSC schema format</a>.</p>

<h2 id="creating-a-schema">Creating a Schema</h2>

<p>Pegasus supports different types of schemas: <a href="#record-type">Records</a>,
<a href="#primitive-types">Primitive types</a>, <a href="#enum-type">Enums</a>, <a href="#array-type">Arrays</a>,
<a href="#map-type">Maps</a>, <a href="#union-type">Unions</a>, <a href="#fixed-type">Fixed</a> and
<a href="#typerefs">Typerefs</a>. Records, Enums, and Typerefs have names (Named schemas)
and thus can be defined as top-level schemas. Named schemas can specify an
optional namespace to avoid naming conflict between schemas with same name.
The name prefixed with the namespace using the dot(<code class="highlighter-rouge">.</code>) separator becomes the
fully qualified name (FQN) of the schema. Named schemas can be
referenced from other schemas using the fully qualified name.</p>

<p>Each top-level schema should be stored in its own file with a <code class="highlighter-rouge">.pdl</code> extension.
Name of the file should match the schema name and the directory structure should
match the namespace (similar to how Java classes are organized).</p>

<p>The Pegasus code generator implements a resolver that is similar to Java class
loaders. If there is a reference to a named schema, the code generator will try
to look for a file in the code generator’s resolver path. The resolver path is
similar to a Java classpath. The fully qualified name of the named schema will
be translated to a relative file name. The relative file name is computed by
replacing dots (<code class="highlighter-rouge">.</code>) in the fully qualified name by the directory path separator
(typically <code class="highlighter-rouge">/</code>) and appending a <code class="highlighter-rouge">.pdl</code> extension. This relative file name looked
up using each location in the resolver path until it finds a file that contains
the named schema.</p>

<h2 id="record-type">Record Type</h2>
<p>Records are the most common type of Pegasus schemas and usually the starting
point when defining data models using Pegasus. A record represents a Named
entity with fields representing attributes of that entity. The fields can be
primitive types, enums, unions, maps, arrays, other records or any valid Pegasus
type.</p>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.time</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">Date</span><span class="p"> {
  </span><span class="nl">day</span><span class="p">:</span> <span class="kt">int</span><span class="p">
  </span><span class="nl">month</span><span class="p">:</span> <span class="kt">int</span><span class="p">
  </span><span class="nl">year</span><span class="p">:</span> <span class="kt">int</span><span class="p">
}
</span></code></pre></div></div>
<p>The above example is defining a record called <code class="highlighter-rouge">Date</code>. This is defined in the
namesapce <code class="highlighter-rouge">com.example.time</code>, giving it the fully qualified name
<code class="highlighter-rouge">com.example.time.Date</code>. So this schema should be defined in the following file</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;project-dir&gt;/pegasus/com/example/time/Date.pdl
</code></pre></div></div>

<p>The <code class="highlighter-rouge">Date</code> record can then be referenced in other schemas:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">import</span> <span class="n">com.example.time.Date</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">User</span><span class="p"> {
  </span><span class="nl">firstName</span><span class="p">:</span> <span class="kt">string</span><span class="p">
  </span><span class="nl">birthday</span><span class="p">:</span> <span class="n">Date</span><span class="p">
}
</span></code></pre></div></div>
<p>The above example is defining a record called <code class="highlighter-rouge">User</code>:</p>
<ul>
  <li>This record is using the namespace <code class="highlighter-rouge">com.example.models</code>. So the fully
 qualified name is <code class="highlighter-rouge">com.example.models.User</code>.</li>
  <li>This record is defining two fields, <code class="highlighter-rouge">firstName</code> and <code class="highlighter-rouge">birthday</code>.</li>
  <li><code class="highlighter-rouge">firstName</code> is a primitive field of type <code class="highlighter-rouge">string</code>.</li>
  <li><code class="highlighter-rouge">birthday</code> references the type <code class="highlighter-rouge">com.example.time.Date</code> from the first example</li>
  <li>PDL supports Java like <code class="highlighter-rouge">import</code> feature that allows you to define references
 to external types and then use them in the schema using their simple name.</li>
</ul>

<h3 id="record-field-attributes">Record Field attributes</h3>
<p>Pegasus supports additional features for defining the behavior of fields in a
record.</p>
<h4 id="record-fields-can-be-defined-as-optional">Record fields can be defined as optional.</h4>
<p>In Pegasus, a field is required unless the field is explicitly declared as
optional using the <code class="highlighter-rouge">optional</code> keyword. An optional field may be present or
absent in the in-memory data structure or serialized data.</p>

<p>In the generated client bindings, Pegasus provides has[Field] methods(eg,
<code class="highlighter-rouge">hasBirthDay()</code>) to determine if an optional field is present.</p>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">import</span> <span class="n">com.example.time.Date</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">User</span><span class="p"> {
  </span><span class="nl">firstName</span><span class="p">:</span> <span class="kt">string</span><span class="p">
  </span><span class="nl">birthday</span><span class="p">:</span> <span class="kr">optional</span><span class="p"> </span><span class="n">Date</span><span class="p">
}
</span></code></pre></div></div>
<p>The above example defines the <code class="highlighter-rouge">birthday</code> field as optional.</p>

<h4 id="record-fields-may-have-default-values">Record fields may have default values.</h4>
<p>Pegasus supports specifying default values for fields. Though the definition
language allows default values for both required and optional fields, it is
recommended to use default values only for required fields.</p>

<p>The default value for a field is expressed as a JSON value confirming to the
type of the field.</p>

<p>In Pegasus generated bindings, the get[Field] accessors will return the value of
the field it is present or the default value from the schema if the field is
absent. The bindings also provide a specialized get accessor that allows the
caller to specify whether the default value or null should be returned when an
absent field is accessed.</p>

<p>See <a href="https://linkedin.github.io/rest.li/java_binding#getmode">GetMode</a> for more
details on accessing optional fields and default values.</p>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">import</span> <span class="n">org.example.time.Date</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">User</span><span class="p"> {
  </span><span class="nl">firstName</span><span class="p">:</span> <span class="kt">string</span><span class="p">
  </span><span class="nl">birthday</span><span class="p">:</span> <span class="kr">optional</span><span class="p"> </span><span class="n">Date</span><span class="p">
  </span><span class="nl">isActive</span><span class="p">:</span> <span class="kt">boolean</span><span class="p"> =</span><span class="w"> </span><span class="kc">true</span><span class="p">
}
</span></code></pre></div></div>
<p>The above example defines a boolean field <code class="highlighter-rouge">isActive</code>, which has a default value
<code class="highlighter-rouge">true</code>.</p>

<h3 id="inlined-schemas">Inlined schemas</h3>
<p>In Pegasus, records and other named schemas need not be top-level schemas. They
can be inlined within other record schemas.</p>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">import</span> <span class="n">com.example.time.Date</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">User</span><span class="p"> {
  </span><span class="nl">firstName</span><span class="p">:</span> <span class="kt">string</span><span class="p">
  </span><span class="nl">birthday</span><span class="p">:</span> <span class="kr">optional</span><span class="p"> </span><span class="n">Date</span><span class="p">
  </span><span class="nl">isActive</span><span class="p">:</span> <span class="kt">boolean</span><span class="p"> =</span><span class="w"> </span><span class="kc">true</span><span class="p">
  </span><span class="nl">address</span><span class="p">:</span> <span class="kr">record</span><span class="p"> </span><span class="n">Address</span><span class="p"> {
    </span><span class="nl">state</span><span class="p">:</span> <span class="kt">string</span><span class="p">
    </span><span class="nl">zipcode</span><span class="p">:</span> <span class="kt">string</span><span class="p">
  }
}
</span></code></pre></div></div>
<p><code class="highlighter-rouge">Address</code> record in the above example is inlined. It inherits the namespace of
the parent record <code class="highlighter-rouge">User</code>, making its fully qualified name <code class="highlighter-rouge">com.example.models.Address</code>.</p>

<ul>
  <li>Namespace of inline types can be specified/overriden by defining a Namespace
surrounding the inlined type.</li>
  <li>The default value of fields using inlined types can be expressed using its
serialized JSON representation.</li>
</ul>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">import</span> <span class="n">com.example.time.Date</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">User</span><span class="p"> {
  </span><span class="nl">firstName</span><span class="p">:</span> <span class="kt">string</span><span class="p">
  </span><span class="nl">birthday</span><span class="p">:</span> <span class="kr">optional</span><span class="p"> </span><span class="n">Date</span><span class="p">
  </span><span class="nl">isActive</span><span class="p">:</span> <span class="kt">boolean</span><span class="p"> =</span><span class="w"> </span><span class="kc">true</span><span class="p">
  </span><span class="nl">address</span><span class="p">:</span> <span class="p">{
    </span><span class="kr">namespace</span> <span class="n">com.example.models.address</span><span class="p">

    </span><span class="kr">record</span><span class="p"> </span><span class="n">Address</span><span class="p"> {
      </span><span class="nl">state</span><span class="p">:</span> <span class="kt">string</span><span class="p">
      </span><span class="nl">zipCode</span><span class="p">:</span> <span class="kt">string</span><span class="p">
    }
  } =</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CA"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"zipCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345"</span><span class="w">
  </span><span class="p">}
}
</span></code></pre></div></div>
<p><strong><em>Note:</em></strong> If a record or a named schema is referenced by other schemas, it should
be a top-level schema. Referencing in-line schemas outside the schema in which
they are defined is not allowed.</p>

<h3 id="doc-strings">Doc Strings</h3>

<p>Pegasus types and fields may be documented using “doc strings” following the
Java style comments.</p>
<ul>
  <li>Comments using <code class="highlighter-rouge">/** */</code> syntax are treated as schema documentation. They will
be included in the in-memory representation and the generated binding classes.</li>
  <li>Comments using <code class="highlighter-rouge">/* */</code> or <code class="highlighter-rouge">//</code> syntax are allowed but not treated as schema
documentation.</li>
</ul>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">import</span> <span class="n">com.example.time.Date</span><span class="p">

</span><span class="cm">/**
 * A record representing an user in the system.
 */</span><span class="p">
</span><span class="kr">record</span><span class="p"> </span><span class="n">User</span><span class="p"> {
  </span><span class="cm">/** First name of the user */</span><span class="p">
  </span><span class="nl">firstName</span><span class="p">:</span> <span class="kt">string</span><span class="p">

  </span><span class="cm">/** User's birth day */</span><span class="p">
  </span><span class="nl">birthday</span><span class="p">:</span> <span class="kr">optional</span><span class="p"> </span><span class="n">Date</span><span class="p">

  </span><span class="c1">// TODO: Can this be an enum?</span><span class="p">
  </span><span class="cm">/** Status of the user. */</span><span class="p">
  </span><span class="nl">isActive</span><span class="p">:</span> <span class="kt">boolean</span><span class="p"> =</span><span class="w"> </span><span class="kc">true</span><span class="p">
}
</span></code></pre></div></div>

<h3 id="deprecation">Deprecation</h3>
<p>Pegasus supports marking types or fields as deprecated by adding <code class="highlighter-rouge">@deprecated</code>
annotation. The deprecation details from the schema will be carried over to the
bindings generated in  different languages.
In Java language, the classes, getter and setter methods generated for
deprecated types will be marked as deprecated.</p>

<p>It is recommended to specify a string describing the reason for deprecation and
the alternative as the value for the <code class="highlighter-rouge">@deprecated</code> annotation.</p>

<p>Deprecate a field:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">import</span> <span class="n">com.example.time.Date</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">User</span><span class="p"> {
  </span><span class="nl">firstName</span><span class="p">:</span> <span class="kt">string</span><span class="p">

  </span><span class="nd">@deprecated</span> <span class="p">=</span><span class="w"> </span><span class="s2">"Use birthday instead."</span><span class="p">
  </span><span class="nl">birthYear</span><span class="p">:</span> <span class="kt">int</span><span class="p">

  </span><span class="nl">birthday</span><span class="p">:</span> <span class="n">Date</span><span class="p">  
}
</span></code></pre></div></div>
<p>Deprecate a record:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="nd">@deprecated</span> <span class="p">=</span><span class="w"> </span><span class="s2">"Use Person type instead."</span><span class="p">
</span><span class="kr">record</span><span class="p"> </span><span class="n">User</span><span class="p"> {
  </span><span class="nl">firstName</span><span class="p">:</span> <span class="kt">string</span><span class="p">
}
</span></code></pre></div></div>

<p>See <a href="#enum-documentation-and-deprecation">Enum documentation and deprecation</a>
for details on deprecating enum symbols.</p>

<h3 id="including-fields">Including fields</h3>
<p>Pegasus records support including fields from one or more other records. When
a record is included, all its fields will be included in the current record. It
does not include any other attribute of the other record.</p>

<p>Includes are transitive, if record A includes record B and record B includes
record C, record A contains all the fields declared in record A, record B and
record C.</p>

<p>The value of the “include” attribute should be a list of records or typerefs of
records. It is an error to specify non-record types in this list.</p>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="cm">/**
 * User includes fields of AuditStamp, User will have fields firstName from
 * itself and fields createdAt and updatedAt from AuditStamp.
 */</span><span class="p">
</span><span class="kr">record</span><span class="p"> </span><span class="n">User</span><span class="p"> </span><span class="kr">includes</span><span class="p"> </span><span class="n">AuditStamp</span><span class="p"> {
  </span><span class="nl">firstName</span><span class="p">:</span> <span class="kt">string</span><span class="p">
}
</span></code></pre></div></div>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="cm">/**
 * A common record to represent audit stamps.
 */</span><span class="p">
</span><span class="kr">record</span><span class="p"> </span><span class="n">AuditStamp</span><span class="p"> {
  </span><span class="cm">/** Time in milliseconds since epoch when this record was created */</span><span class="p">
  </span><span class="nl">createdAt</span><span class="p">:</span> <span class="kt">long</span><span class="p">

  </span><span class="cm">/** Time in milliseconds since epoch when this record was last updated */</span><span class="p">
  </span><span class="nl">updatedAt</span><span class="p">:</span> <span class="kt">long</span><span class="p">
}
</span></code></pre></div></div>

<p>Includes feature allows including fields from multiple records.</p>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="cm">/** A common record for specifying version tags of a record */</span><span class="p">
</span><span class="kr">record</span><span class="p"> </span><span class="n">VersionTag</span><span class="p"> {
  </span><span class="nl">versionTag</span><span class="p">:</span> <span class="kt">string</span><span class="p">
}
</span></code></pre></div></div>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="cm">/**
 * User includes fields of AuditStamp, User will have fields firstName from
 * itself and fields createdAt and updatedAt from AuditStamp.
 */</span><span class="p">
</span><span class="kr">record</span><span class="p"> </span><span class="n">User</span><span class="p"> </span><span class="kr">includes</span><span class="p"> </span><span class="n">AuditStamp</span><span class="p">, </span><span class="n">VersionTag</span><span class="p"> {
  </span><span class="nl">firstName</span><span class="p">:</span> <span class="kt">string</span><span class="p">
}
</span></code></pre></div></div>

<p><strong><em>Note:</em></strong> Record inclusion does not imply inheritance, it is merely a
convenience to reduce duplication when writing schemas.</p>

<h2 id="primitive-types">Primitive Types</h2>
<p>The above examples already introduced <code class="highlighter-rouge">int</code>, <code class="highlighter-rouge">long</code>, <code class="highlighter-rouge">string</code> and <code class="highlighter-rouge">boolean</code>
primitive types that are supported by Pegasus.
The full list of supported Pegasus primitive types are: <code class="highlighter-rouge">int</code>, <code class="highlighter-rouge">long</code>, <code class="highlighter-rouge">float</code>,
<code class="highlighter-rouge">double</code>, <code class="highlighter-rouge">boolean</code>, <code class="highlighter-rouge">string</code> and <code class="highlighter-rouge">bytes</code>.</p>

<p>The actual types used for the primitives depends on the language specific
binding implementation. For details on Java bindings for Pegasus primitives, see
<a href="https://linkedin.github.io/rest.li/java_binding#primitive-types">Primitive Types</a></p>

<p>Primitive types cannot be named (except through <a href="#typerefs">typerefs</a>) and thus
cannot be defined as top-level schemas.</p>

<p>Some examples showing how different primitive fields can be defined and the
syntax for specifying default values:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">WithPrimitives</span><span class="p"> {
  </span><span class="nl">intField</span><span class="p">:</span> <span class="kt">int</span><span class="p">
  </span><span class="nl">longField</span><span class="p">:</span> <span class="kt">long</span><span class="p">
  </span><span class="nl">floatField</span><span class="p">:</span> <span class="kt">float</span><span class="p">
  </span><span class="nl">doubleField</span><span class="p">:</span> <span class="kt">double</span><span class="p">
  </span><span class="nl">booleanField</span><span class="p">:</span> <span class="kt">boolean</span><span class="p">
  </span><span class="nl">stringField</span><span class="p">:</span> <span class="kt">string</span><span class="p">
  </span><span class="nl">bytesField</span><span class="p">:</span> <span class="kt">bytes</span><span class="p">
}
</span></code></pre></div></div>

<p>Primitive types with default values:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">WithPrimitiveDefaults</span><span class="p"> {
  </span><span class="nl">intWithDefault</span><span class="p">:</span> <span class="kt">int</span><span class="p"> =</span><span class="w"> </span><span class="mi">1</span><span class="p">
  </span><span class="nl">longWithDefault</span><span class="p">:</span> <span class="kt">long</span><span class="p"> =</span><span class="w"> </span><span class="mi">3000000000</span><span class="p">
  </span><span class="nl">floatWithDefault</span><span class="p">:</span> <span class="kt">float</span><span class="p"> =</span><span class="w"> </span><span class="mf">3.3</span><span class="p">
  </span><span class="nl">doubleWithDefault</span><span class="p">:</span> <span class="kt">double</span><span class="p"> =</span><span class="w"> </span><span class="mf">4.4E38</span><span class="p">
  </span><span class="nl">booleanWithDefault</span><span class="p">:</span> <span class="kt">boolean</span><span class="p"> =</span><span class="w"> </span><span class="kc">true</span><span class="p">
  </span><span class="nl">stringWithDefault</span><span class="p">:</span> <span class="kt">string</span><span class="p"> =</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">
  </span><span class="nl">bytesWithDefault</span><span class="p">:</span> <span class="kt">bytes</span><span class="p"> =</span><span class="w"> </span><span class="s2">"</span><span class="se">\u</span><span class="s2">0007"</span><span class="p">
}
</span></code></pre></div></div>

<h2 id="enum-type">Enum Type</h2>

<p>Enums, as the name suggests contains an enumeration of symbols. Enums are named
schemas and can be defined as top-level schema or inlined.</p>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">enum</span><span class="p"> </span><span class="n">UserStatus</span><span class="p"> {
  </span><span class="n">ACTIVE</span><span class="p">
  </span><span class="n">SUSPENDED</span><span class="p">
  </span><span class="n">INACTIVE</span><span class="p">
}
</span></code></pre></div></div>

<p>Enums can be referenced by name in other schemas:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">User</span><span class="p"> {
  </span><span class="nl">firstName</span><span class="p">:</span> <span class="kt">string</span><span class="p">
  </span><span class="nl">status</span><span class="p">:</span> <span class="n">UserStatus</span><span class="p">
}
</span></code></pre></div></div>

<p>Enums can also be defined inline:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">User</span><span class="p"> {
  </span><span class="nl">firstName</span><span class="p">:</span> <span class="kt">string</span><span class="p">
  </span><span class="nl">status</span><span class="p">:</span> <span class="n">UserStatus</span><span class="p">
  </span><span class="nl">suspendedReason</span><span class="p">:</span> <span class="kr">enum</span><span class="p"> </span><span class="n">StatusReason</span><span class="p"> {
    </span><span class="n">FLAGGED_BY_SPAM_CHECK</span><span class="p">
    </span><span class="n">REPORTED_BY_ADMIN</span><span class="p">
  }
}
</span></code></pre></div></div>

<h3 id="enum-documentation-and-deprecation">Enum documentation and deprecation</h3>
<p>Doc comments and deprecation can be added directly to individual enum symbols.</p>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="cm">/**
 * Defines the states of a user in the system.
 */</span><span class="p">
</span><span class="kr">enum</span><span class="p"> </span><span class="n">UserStatus</span><span class="p"> {
  </span><span class="cm">/**
   * Represents an active user.
   */</span><span class="p">
  </span><span class="n">ACTIVE</span><span class="p">

  </span><span class="cm">/**
   * Represents user suspended for some reason.
   */</span><span class="p">
  </span><span class="n">SUSPENDED</span><span class="p">

  </span><span class="cm">/**
   * Represents an user who had deleted/inactivated their account.
   */</span><span class="p">
  </span><span class="nd">@deprecated</span> <span class="p">=</span><span class="w"> </span><span class="s2">"Use INACTIVE for users pending deletion. Deleted users should not be in system"</span><span class="p">
  </span><span class="n">DELETED</span><span class="p">

  </span><span class="cm">/**
   * Represents users requested for deletion and in the process of being deleted.
   */</span><span class="p">
   </span><span class="n">INACTIVE</span><span class="p">
}
</span></code></pre></div></div>

<h3 id="enum-defaults">Enum defaults</h3>

<p>To specify the default value for an enum field, use the string representation of
the enum symbol to set as default.</p>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">User</span><span class="p"> {
  </span><span class="nl">firstName</span><span class="p">:</span> <span class="kt">string</span><span class="p">
  </span><span class="nl">status</span><span class="p">:</span> <span class="n">UserStatus</span><span class="p"> =</span><span class="w"> </span><span class="s2">"ACTIVE"</span><span class="p">
  </span><span class="nl">suspendedReason</span><span class="p">:</span> <span class="kr">enum</span><span class="p"> </span><span class="n">StatusReason</span><span class="p"> {
    </span><span class="n">FLAGGED_BY_SPAM_CHECK</span><span class="p">
    </span><span class="n">REPORTED_BY_ADMIN</span><span class="p">
  } =</span><span class="w"> </span><span class="s2">"FLAGGED_BY_SPAM_CHECK"</span><span class="p">
}
</span></code></pre></div></div>

<h2 id="array-type">Array Type</h2>

<p>Pegasus Arrays are defined as a homogeneous collection of some “items” type,
which can be <a href="#creating-a-schema">any valid PDL type</a>. Arrays are ordered,
as in the items in an array have a specific ordering and this ordering will
be honored when the data is serialized, sent over the wire, and de-serialized.</p>

<p>Some examples below for defining arrays and default values for them.</p>

<p>Primitive arrays:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">WithPrimitivesArray</span><span class="p"> {
  </span><span class="nl">ints</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="kt">int</span><span class="p">]
  </span><span class="nl">longs</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="kt">long</span><span class="p">]
  </span><span class="nl">floats</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="kt">float</span><span class="p">]
  </span><span class="nl">doubles</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="kt">double</span><span class="p">]
  </span><span class="nl">booleans</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="kt">boolean</span><span class="p">]
  </span><span class="nl">strings</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="kt">string</span><span class="p">]
  </span><span class="nl">bytes</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="kt">bytes</span><span class="p">]
}
</span></code></pre></div></div>

<p>Primitive arrays with default values:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">WithPrimitivesArrayDefaults</span><span class="p"> {
  </span><span class="nl">ints</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="kt">int</span><span class="p">] =</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">]
  </span><span class="nl">longs</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="kt">long</span><span class="p">] =</span><span class="w"> </span><span class="p">[</span><span class="mi">3000000000</span><span class="p">,</span><span class="w"> </span><span class="mi">4000000000</span><span class="p">]
  </span><span class="nl">floats</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="kt">float</span><span class="p">] =</span><span class="w"> </span><span class="p">[</span><span class="mf">3.3</span><span class="p">,</span><span class="w"> </span><span class="mf">2.5</span><span class="p">]
  </span><span class="nl">doubles</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="kt">double</span><span class="p">] =</span><span class="w"> </span><span class="p">[</span><span class="mf">4.4E38</span><span class="p">,</span><span class="w"> </span><span class="mf">3.1E24</span><span class="p">]
  </span><span class="nl">booleans</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="kt">boolean</span><span class="p">] =</span><span class="w"> </span><span class="p">[</span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">]
  </span><span class="nl">strings</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="kt">string</span><span class="p">] =</span><span class="w"> </span><span class="p">[</span><span class="s2">"hello"</span><span class="p">]
  </span><span class="nl">bytes</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="kt">bytes</span><span class="p">] =</span><span class="w"> </span><span class="p">[</span><span class="s2">"</span><span class="se">\u</span><span class="s2">0007"</span><span class="p">]
}
</span></code></pre></div></div>

<p>Record or Enum arrays:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">SuspendedUsersReport</span><span class="p"> {
  </span><span class="nl">users</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="n">User</span><span class="p">]
  </span><span class="nl">reasons</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="n">SuspendReason</span><span class="p">]
}
</span></code></pre></div></div>

<p>Record or Enum arrays with default values:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">SuspendedUsersReport</span><span class="p"> {
  </span><span class="nl">users</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="n">User</span><span class="p">] =</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Joker"</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Darth"</span><span class="p">}]
  </span><span class="nl">reasons</span><span class="p">:</span> <span class="kr">array</span><span class="p">[</span><span class="n">SuspendReason</span><span class="p">] =</span><span class="w"> </span><span class="p">[</span><span class="s2">"FLAGGED_BY_SPAM_CHECK"</span><span class="p">]
}
</span></code></pre></div></div>

<h2 id="map-type">Map Type</h2>

<p>Maps are defined with a key type and a value type. The value type can
be <a href="#creating-a-schema">any valid PDL type</a>, but currently <code class="highlighter-rouge">string</code> is
the only supported key type. Entries in a Map are <em>not</em> ordered and the
order can change when the data is serialized/de-serialized.</p>

<p>Some examples below for defining maps and default values for them.</p>

<p>Primitive maps:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">WithPrimitivesMap</span><span class="p"> {
  </span><span class="nl">ints</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kt">int</span><span class="p">]
  </span><span class="nl">longs</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kt">long</span><span class="p">]
  </span><span class="nl">floats</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kt">float</span><span class="p">]
  </span><span class="nl">doubles</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kt">double</span><span class="p">]
  </span><span class="nl">booleans</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kt">boolean</span><span class="p">]
  </span><span class="nl">strings</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kt">string</span><span class="p">]
  </span><span class="nl">bytes</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kt">bytes</span><span class="p">]
}
</span></code></pre></div></div>

<p>Primitive maps with default values:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">WithPrimitivesMapDefaults</span><span class="p"> {
  </span><span class="nl">ints</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kt">int</span><span class="p">] =</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"int1"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nl">"int2"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nl">"int3"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">}
  </span><span class="nl">longs</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kt">long</span><span class="p">] =</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"long1"</span><span class="p">:</span><span class="w"> </span><span class="mi">3000000000</span><span class="p">,</span><span class="w"> </span><span class="nl">"long2"</span><span class="p">:</span><span class="w"> </span><span class="mi">4000000000</span><span class="w"> </span><span class="p">}
  </span><span class="nl">floats</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kt">float</span><span class="p">] =</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"float1"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.3</span><span class="p">,</span><span class="w"> </span><span class="nl">"float2"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.1</span><span class="w"> </span><span class="p">}
  </span><span class="nl">doubles</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kt">double</span><span class="p">] =</span><span class="w"> </span><span class="p">{</span><span class="nl">"double1"</span><span class="p">:</span><span class="w"> </span><span class="mf">4.4E38</span><span class="p">,</span><span class="w"> </span><span class="nl">"double2"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.1E24</span><span class="p">}
  </span><span class="nl">booleans</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kt">boolean</span><span class="p">] =</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"boolean1"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nl">"boolean2"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nl">"boolean3"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">}
  </span><span class="nl">strings</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kt">string</span><span class="p">] =</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"string1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hello"</span><span class="p">,</span><span class="w"> </span><span class="nl">"string2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"world"</span><span class="w"> </span><span class="p">}
  </span><span class="nl">bytes</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kt">bytes</span><span class="p">] =</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"bytes"</span><span class="p">:</span><span class="w"> </span><span class="s2">"</span><span class="se">\u</span><span class="s2">0007"</span><span class="w"> </span><span class="p">}
}
</span></code></pre></div></div>

<p>Maps with complex values:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">UserReport</span><span class="p"> {
  </span><span class="cm">/** Users grouped by their status. Key is the string representation of status enum */</span><span class="p">
  </span><span class="nl">usersByStatus</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kr">array</span><span class="p">[</span><span class="n">User</span><span class="p">]]

  </span><span class="cm">/**
   * Count of users grouped by firstName and then by status.
   * First level key is the firstName of users.
   * Second level key is the string representation of status.
   */</span><span class="p">
  </span><span class="nl">countByFirstNameAndStatus</span><span class="p">:</span> <span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kr">map</span><span class="p">[</span><span class="kt">string</span><span class="p">, </span><span class="kt">int</span><span class="p">]]
}
</span></code></pre></div></div>

<h2 id="union-type">Union Type</h2>
<p>Union is a powerful way to model data that can be of different types at
different scenarios. Record fields that have this behavior can be defined as a
Union type with the expected value types as its members.</p>

<p>A union type may be defined with any number of member types. Member type can be
primitive, record, enum, map or array. Unions are not allowed as members inside
an union.</p>

<p>The fully qualified member type names also serve as the “member keys” (also
called as “union tags”), and identify which union member type data holds. These
are used to represent which member is present when the data is serialized.</p>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">Account</span><span class="p"> {
  </span><span class="cm">/**
   * Owner of this account. Accounts can be owned either by a single User or an
   * user group.
   */</span><span class="p">
  </span><span class="nl">owner</span><span class="p">:</span> <span class="kr">union</span><span class="p">[</span><span class="n">User</span><span class="p">, </span><span class="n">UserGroup</span><span class="p">]
}
</span></code></pre></div></div>

<p>The above example defines an <code class="highlighter-rouge">owner</code> field that can either be an User or an
UserGroup.</p>

<p>Union with default value:</p>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">Account</span><span class="p"> {
  </span><span class="cm">/**
   * Owner of this account. Accounts can be owned either by a single User or an
   * user group.
   * By default, All your accounts are belong to CATS.
   */</span><span class="p">
  </span><span class="nl">owner</span><span class="p">:</span> <span class="kr">union</span><span class="p">[</span><span class="n">User</span><span class="p">, </span><span class="n">UserGroup</span><span class="p">] =</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"com.example.models.User"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CATS"</span><span class="w"> </span><span class="p">}}
}
</span></code></pre></div></div>

<p>Types can be declared inline within a union definition:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">User</span><span class="p"> {
  </span><span class="nl">firstName</span><span class="p">:</span> <span class="kt">string</span><span class="p">
  </span><span class="nl">status</span><span class="p">:</span> <span class="n">UserStatus</span><span class="p"> =</span><span class="w"> </span><span class="s2">"ACTIVE"</span><span class="p">
  </span><span class="nl">statusReason</span><span class="p">:</span> <span class="kr">union</span><span class="p"> [
    </span><span class="kr">enum</span><span class="p"> </span><span class="n">ActiveReason</span><span class="p"> {
      </span><span class="n">NEVER_SUSPENDED</span><span class="p">
      </span><span class="n">SUSPENSION_CLEARED</span><span class="p">
    }
    </span><span class="kr">enum</span><span class="p"> </span><span class="n">SuspendReason</span><span class="p"> {
      </span><span class="n">FLAGGED_BY_SPAM_CHECK</span><span class="p">
      </span><span class="n">REPORTED_BY_ADMIN</span><span class="p">
    }
    </span><span class="kr">enum</span><span class="p"> </span><span class="n">InactiveReason</span><span class="p"> {
      </span><span class="n">USER_REQUESTED_DELETION</span><span class="p">
      </span><span class="n">REQUESTED_BY_ADMIN</span><span class="p">
    }
  ] =</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"com.example.models.ActiveReason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NEVER_SUSPENDED"</span><span class="w"> </span><span class="p">}
}
</span></code></pre></div></div>

<h3 id="union-with-aliases">Union with aliases</h3>
<p><strong><em>Note:</em></strong> <em>Union with aliases is a recent feature in the Pegasus schema
*language and it might not be fully supported in non-java languages. Please
*check the <a href="/rest.li/multi_language_compatibility_matrix">support level</a> on all
*languages you intend to use before using aliases</em></p>

<p>Union members can optionally be given an alias. Aliases can be used to create
unions with members of the same type or to give better naming for union members.</p>

<p>Union with aliases is required for cases where the union contains multiple
members that are:</p>
<ul>
  <li>of same primitive type</li>
  <li>of same named complex type</li>
  <li>arrays of same or different item types</li>
  <li>maps of same or different value types</li>
  <li>typerefs dereferenced to same type</li>
</ul>

<p>Such unions must specify an unique alias for each member in the union
definition. When an alias is specified, it acts as the member’s discriminator
unlike the member type name on the standard unions defined above.</p>

<p>Aliased unions are defined as:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">union</span><span class="p"> [</span><span class="nl">alias</span><span class="p">: </span><span class="n">type</span><span class="p">, </span><span class="cm">/* ... */</span><span class="p">]
</span></code></pre></div></div>
<p>There are few constraints that must be taken in consideration while specifying
aliases for union members,</p>

<ol>
  <li>Aliases must be unique for each member in a union definition.</li>
  <li>Aliases must be specified for either all or none of the members in a union
definition.</li>
  <li>Aliases cannot be specified for <code class="highlighter-rouge">null</code> member types which means there can
only be one null member inside a union definition.</li>
</ol>

<p>An example showing union with aliases:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="cm">/**
 * A record with user's contact information.
 */</span><span class="p">
</span><span class="kr">record</span><span class="p"> </span><span class="n">Contacts</span><span class="p"> {
  </span><span class="cm">/** Primary phone number for the user */</span><span class="p">
  </span><span class="nl">primaryPhoneNumber</span><span class="p">:</span> <span class="kr">union</span><span class="p">[
    </span><span class="cm">/** A mobile phone number */</span><span class="p">
    </span><span class="nl">mobile</span><span class="p">: </span><span class="n">PhoneNumber</span><span class="p">,

    </span><span class="cm">/**
     * A work phone number
     */</span><span class="p">
    </span><span class="nl">work</span><span class="p">: </span><span class="n">PhoneNumber</span><span class="p">,

    </span><span class="cm">/** A home phone number */</span><span class="p">
    </span><span class="nl">home</span><span class="p">: </span><span class="n">PhoneNumber</span><span class="p">
  ]
}
</span></code></pre></div></div>
<p>Since all three union members <code class="highlighter-rouge">mobile</code>, <code class="highlighter-rouge">work</code> and <code class="highlighter-rouge">home</code> are of the same type
<code class="highlighter-rouge">PhoneNumber</code>, aliases are required for this union.</p>

<p><strong>Aliased union members can have doc strings and custom properties. This is not supported for non-aliased union members.</strong></p>

<p>When using unions with aliases, the alias should be used as the key within the default value:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="cm">/**
 * A record with user's contact information.
 */</span><span class="p">
</span><span class="kr">record</span><span class="p"> </span><span class="n">Contacts</span><span class="p"> {
  </span><span class="cm">/** Primary phone number for the user */</span><span class="p">
  </span><span class="nl">primaryPhoneNumber</span><span class="p">:</span> <span class="kr">union</span><span class="p">[
    </span><span class="cm">/** A mobile phone number */</span><span class="p">
    </span><span class="nl">mobile</span><span class="p">: </span><span class="n">PhoneNumber</span><span class="p">,

    </span><span class="cm">/**
     * A work phone number
     */</span><span class="p">
    </span><span class="nl">work</span><span class="p">: </span><span class="n">PhoneNumber</span><span class="p">,

    </span><span class="cm">/** A home phone number */</span><span class="p">
    </span><span class="nl">home</span><span class="p">: </span><span class="n">PhoneNumber</span><span class="p">
  ] =</span><span class="w"> </span><span class="p">{</span><span class="nl">"mobile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"314-159-2653"</span><span class="w"> </span><span class="p">}}
}
</span></code></pre></div></div>

<h2 id="typeref">Typeref</h2>

<p>Pegasus supports a new schema type known as a typeref. A typeref is like a
typedef in C. It does not declare a new type but declares an alias to an
existing type.</p>

<h3 id="typerefs-can-provide-additional-clarity-when-using-primitive-types">Typerefs can provide additional clarity when using primitive types.</h3>
<p>Typerefs are useful for differentiating different uses of the same type. For
example, we can use to a typeref to differentiate a string field that holds an
URL from an arbitrary string value or a long field that holds an epoch time in
milliseconds from a generic long value.</p>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="cm">/** Number of milliseconds since midnight, January 1, 1970 UTC. */</span><span class="p">
</span><span class="kr">typeref</span><span class="p"> </span><span class="n">Time</span><span class="p"> = </span><span class="kt">long</span><span class="p">
</span></code></pre></div></div>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="cm">/**
 * A common record to represent audit stamps.
 */</span><span class="p">
</span><span class="kr">record</span><span class="p"> </span><span class="n">AuditStamp</span><span class="p"> {
  </span><span class="cm">/** Time when this record was created */</span><span class="p">
  </span><span class="nl">createdAt</span><span class="p">:</span> <span class="n">Time</span><span class="p">

  </span><span class="cm">/** Time when this record was last updated */</span><span class="p">
  </span><span class="nl">updatedAt</span><span class="p">:</span> <span class="n">Time</span><span class="p">
}
</span></code></pre></div></div>
<p>A typeref allows additional meta-data to be associated with primitive and
unnamed types. This meta-data can be used to provide documentation or support
custom properties.</p>

<h3 id="typerefs-can-be-used-to-name-anonymous-types">Typerefs can be used to name anonymous types.</h3>
<p>A typeref provides a way to refer to common unnamed types such as arrays, maps,
and unions. Without typerefs, users may have to wrap these unnamed types with a
record in order to address them. Alternatively, users may cut-and-paste common
type declarations, resulting in unnecessary duplication and potentially causing
inconsistencies if future changes are not propagated correctly to all copies.</p>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">typeref</span><span class="p"> </span><span class="n">PhoneContact</span><span class="p"> = </span><span class="kr">union</span><span class="p">[
  </span><span class="cm">/** A mobile phone number */</span><span class="p">
  </span><span class="nl">mobile</span><span class="p">: </span><span class="n">PhoneNumber</span><span class="p">,

  </span><span class="cm">/**
   * A work phone number
   */</span><span class="p">
  </span><span class="nl">work</span><span class="p">: </span><span class="n">PhoneNumber</span><span class="p">,

  </span><span class="cm">/** A home phone number */</span><span class="p">
  </span><span class="nl">home</span><span class="p">: </span><span class="n">PhoneNumber</span><span class="p">
]

</span></code></pre></div></div>

<p>Typerefs can then be referred to by name from any other type:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">Contacts</span><span class="p"> {
  </span><span class="nl">primaryPhone</span><span class="p">:</span> <span class="n">PhoneContact</span><span class="p">
  </span><span class="nl">secondaryPhone</span><span class="p">:</span> <span class="n">PhoneContact</span><span class="p">
}
</span></code></pre></div></div>

<h3 id="typerefs-can-be-used-to-specify-custom-types-and-coercers">Typerefs can be used to specify custom types and coercers</h3>

<p>For example, Joda time has a convenient <code class="highlighter-rouge">DateTime</code> Java class. If we wish to use
this class in Java to represent date-times, all we need to do is define a
Pegasus custom type that binds to it:</p>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="nd">@java.class</span> <span class="p">=</span><span class="w"> </span><span class="s2">"org.joda.time.DateTime"</span><span class="p">
</span><span class="nd">@java.coercerClass</span> <span class="p">=</span><span class="w"> </span><span class="s2">"com.example.time.DateTimeCoercer"</span><span class="p">
</span><span class="kr">typeref</span><span class="p"> </span><span class="n">DateTime</span><span class="p"> = </span><span class="kt">string</span><span class="p">
</span></code></pre></div></div>
<p>The coercer is responsible for converting the Pegasus “referenced” type, in this
case “string” to the Joda <code class="highlighter-rouge">DateTime</code> class.</p>

<p>See [Java Binding]
(https://linkedin.github.io/rest.li/java_binding#custom-java-class-binding-for-primitive-types)
for more details on defining and using custom types.</p>

<h2 id="fixed-type">Fixed Type</h2>

<p>The Fixed type is used to define schemas with a fixed size in terms of number of
bytes.</p>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">fixed</span><span class="p"> </span><span class="n">MD5</span><span class="p"> </span><span class="mi">16</span><span class="p">
</span></code></pre></div></div>
<p>The example above defines a type called <code class="highlighter-rouge">MD5</code>, which has a size of <code class="highlighter-rouge">16 bytes</code>.</p>

<h2 id="imports">Imports</h2>
<p>Imports are optional statements which allow you to avoid writing fully-qualified
names. They function similarly to imports in Java.</p>

<p>For example, the following record can be expressed <em>without</em> imports like this:</p>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">AuditStamp</span><span class="p"> {
  </span><span class="nl">createdAt</span><span class="p">:</span> <span class="n">com.example.models.time.Time</span><span class="p">
  </span><span class="nl">updatedAt</span><span class="p">:</span> <span class="n">com.example.models.time.Time</span><span class="p">
}
</span></code></pre></div></div>

<p>Alternatively, the record can be expressed using imports, minimizing the need
for repetitive code:</p>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">import</span> <span class="n">com.example.models.time.Time</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">AuditStamp</span><span class="p"> {
  </span><span class="nl">createdAt</span><span class="p">:</span> <span class="n">Time</span><span class="p">
  </span><span class="nl">updatedAt</span><span class="p">:</span> <span class="n">Time</span><span class="p">
}
</span></code></pre></div></div>

<p><strong>Note:</strong></p>
<ul>
  <li>Any type that is not imported and is not within the namespace from which it’s
referenced must be referenced by fully qualified name.</li>
  <li>Imports take precedence when Pegasus resolves identifiers in a schema. So
be careful when adding an import that conflicts with types in the same namespace
of the root-document.</li>
  <li>Using imports in the following ways will lead to PDL parser errors. You should
avoid doing so.
    <ol>
      <li>Importing types declared inside the document.</li>
      <li>Importing types within the root namespace of the document.</li>
      <li>Declaring types that conflict with existing imports.</li>
    </ol>
  </li>
</ul>

<h2 id="properties">Properties</h2>
<p>Properties can be used to present arbitrary data and added to records, record
fields, enums, enum symbols or aliased union members. Properties are defined
using the <code class="highlighter-rouge">@propertyName</code> syntax. They provide custom data and are available
to users for extending the functionality of the Pegasus schema.</p>

<p>It is up to the users to define the semantic meaning for these custom
properties. Pegasus language will treat them as key-value pairs and make them
available with the in-memory representation of the schema.</p>

<p>Add properties to record and record field:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@hasPii</span> <span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="p">
</span><span class="kr">record</span><span class="p"> </span><span class="n">User</span><span class="p"> {
  </span><span class="nd">@validate.regex.regex</span> <span class="p">=</span><span class="w"> </span><span class="s2">"^[a-zA-Z]+$"</span><span class="p">
  </span><span class="nl">firstName</span><span class="p">:</span> <span class="kt">string</span><span class="p">
}
</span></code></pre></div></div>
<p>The above example shows a record level property <code class="highlighter-rouge">hasPii</code> that can be used to
indicate if the record has personally identifiable information. This can then
be used by application specific business logic.</p>

<p>Add properties to enum and enum symbols:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="cm">/**
 * Defines the states of a user in the system.
 */</span><span class="p">
</span><span class="nd">@hasPii</span> <span class="p">=</span><span class="w"> </span><span class="kc">false</span><span class="p">
</span><span class="kr">enum</span><span class="p"> </span><span class="n">UserStatus</span><span class="p"> {
  </span><span class="cm">/**
   * Represents an active user.
   */</span><span class="p">
  </span><span class="nd">@stringFormat</span> <span class="p">=</span><span class="w"> </span><span class="s2">"active"</span><span class="p">
  </span><span class="n">ACTIVE</span><span class="p">

  </span><span class="cm">/**
   * Represents user suspended for some reason.
   */</span><span class="p">
   </span><span class="nd">@stringFormat</span> <span class="p">=</span><span class="w"> </span><span class="s2">"suspended"</span><span class="p">
  </span><span class="n">SUSPENDED</span><span class="p">

  </span><span class="cm">/**
   * Represents an user who had deleted/inactivated their account.
   */</span><span class="p">
  </span><span class="nd">@deprecated</span> <span class="p">=</span><span class="w"> </span><span class="s2">"Use INACTIVE for users pending deletion. Deleted users should not be in system"</span><span class="p">
  </span><span class="nd">@stringFormat</span> <span class="p">=</span><span class="w"> </span><span class="s2">"deleted"</span><span class="p">
  </span><span class="n">DELETED</span><span class="p">

  </span><span class="cm">/**
   * Represents users requested for deletion and in the process of being deleted.
   */</span><span class="p">
   </span><span class="nd">@stringFormat</span> <span class="p">=</span><span class="w"> </span><span class="s2">"not active"</span><span class="p">
   </span><span class="n">INACTIVE</span><span class="p">
}
</span></code></pre></div></div>

<p>Add properties to aliased union members:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">typeref</span><span class="p"> </span><span class="n">PhoneContact</span><span class="p"> = </span><span class="kr">union</span><span class="p">[
  </span><span class="cm">/** A mobile phone number */</span><span class="p">
  </span><span class="nd">@allowText</span> <span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="p">
  </span><span class="nl">mobile</span><span class="p">: </span><span class="n">PhoneNumber</span><span class="p">,

  </span><span class="cm">/**
   * A work phone number
   */</span><span class="p">
  </span><span class="nd">@allowText</span> <span class="p">=</span><span class="w"> </span><span class="kc">false</span><span class="p">
  </span><span class="nl">work</span><span class="p">: </span><span class="n">PhoneNumber</span><span class="p">,

  </span><span class="cm">/** A home phone number */</span><span class="p">
  </span><span class="nd">@allowText</span> <span class="p">=</span><span class="w"> </span><span class="kc">false</span><span class="p">
  </span><span class="nl">home</span><span class="p">: </span><span class="n">PhoneNumber</span><span class="p">
]

</span></code></pre></div></div>

<h3 id="property-values-can-be-any-valid-json-type">Property values can be any valid JSON type:</h3>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@prop</span> <span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="p">
</span></code></pre></div></div>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@prop</span> <span class="p">=</span><span class="w"> </span><span class="s2">"string"</span><span class="p">
</span></code></pre></div></div>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@prop</span> <span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">]
</span></code></pre></div></div>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@prop</span> <span class="p">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"a"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nl">"b"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"c"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}}

</span></code></pre></div></div>
<h3 id="property-values-can-also-be-empty">Property values can also be empty:</h3>

<p>If you don’t indicate an explicit property value, it will result in an implicit
value of <code class="highlighter-rouge">true</code>.</p>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@hasPii</span><span class="p">
</span></code></pre></div></div>

<h3 id="property-keys-can-be-expressed-as-json">Property keys can be expressed as JSON:</h3>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@validate</span> <span class="p">=</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"regex"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"pattern"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^[a-z]+$"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}
</span></code></pre></div></div>

<h3 id="property-keys-can-be-expressed-as-paths">Property keys can be expressed as paths:</h3>

<p>The JSON style property key is complicated to write and read, so we provide a
shorthand - the dot separate format to express the property keys.</p>

<p>The following example is equivalent to the previous JSON example:</p>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@validate.regex.pattern</span> <span class="p">=</span><span class="w"> </span><span class="s2">"^[a-z]+$"</span><span class="p">
</span></code></pre></div></div>

<h2 id="package">Package</h2>

<p>Package is used to qualify the language binding namespace for the named schema.</p>

<p>For example:</p>
<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">
</span><span class="kr">package</span> <span class="n">com.example.api</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">User</span><span class="p"> {
  </span><span class="nl">firstName</span><span class="p">:</span> <span class="kt">string</span><span class="p">
}
</span></code></pre></div></div>
<p>If package is not specified, language binding class for the named schema will
use <code class="highlighter-rouge">namespace</code> as its default namespace.</p>

<p>In <a href="https://linkedin.github.io/rest.li/java_binding">Java binding</a>, the package
of the generated class will be determined by the <code class="highlighter-rouge">package</code> specified in the
schema.</p>

<h2 id="escaping">Escaping</h2>
<p>There are <a href="https://github.com/linkedin/rest.li/blob/8ada11feaf9cf7ff3ce8c84f18fd2cc65168663a/data/src/main/java/com/linkedin/data/schema/PdlBuilder.java#L50">some
keywords</a>
which are reserved in Pegasus. If these reserved keywords are used to define any
names or identifiers, they need to be escaped using  back-ticks: ` `.</p>

<h3 id="keyword-escaping">Keyword Escaping</h3>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">PdlKeywordEscaping</span><span class="p"> {
  </span><span class="nl">`namespace`</span><span class="p">:</span> <span class="kt">string</span><span class="p">
  </span><span class="nl">`record`</span><span class="p">:</span> <span class="kt">string</span><span class="p">
  </span><span class="nl">`null`</span><span class="p">:</span> <span class="kt">string</span><span class="p">
  </span><span class="nl">`enum`</span><span class="p">:</span> <span class="kt">string</span><span class="p">
  </span><span class="nl">recordName</span><span class="p">:</span> <span class="kr">record</span><span class="p"> </span><span class="n">`record`</span><span class="p"> { }
}
</span></code></pre></div></div>

<h3 id="namespacepackage-escaping">Namespace/Package escaping</h3>

<p>Reserved keywords also need to be escaped when used in namespace declarations,
package declarations and import statements.</p>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models.`record`</span><span class="p">
</span><span class="kr">package</span> <span class="n">com.example.models.`typeref`</span><span class="p">

</span><span class="kr">import</span> <span class="n">com.example.models.`optional`</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">NamespacePackageEscaping</span><span class="p"> { }
</span></code></pre></div></div>

<h3 id="property-key-escaping">Property key escaping</h3>

<p>If you want Pegasus to treat property key name with dots as one string key,
please use backticks to escape such string. Escaping property keys can also be
used to escape reserved keywords such as “namespace” or to escape
non-alpha-numberic characters in the keys.</p>

<p>For example:</p>

<div class="language-pdl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">namespace</span> <span class="n">com.example.models</span><span class="p">

</span><span class="kr">record</span><span class="p"> </span><span class="n">User</span><span class="p"> {
  </span><span class="nd">@`namespace`</span> <span class="p">=</span><span class="w"> </span><span class="s2">"foo.bar"</span><span class="p">
  </span><span class="nd">@validate.`com.linkedin.CustomValidator`</span> <span class="p">=</span><span class="w"> </span><span class="s2">"foo"</span><span class="p">
  </span><span class="nl">firstName</span><span class="p">:</span> <span class="kt">string</span><span class="p">
}
</span></code></pre></div></div>

                     </div>
                   </div>
</div>



      <footer class="page-footer">
    <div class="container">
      <div class="row">
        <div class="col s6">
          <h5>Rest.li</h5>
          <p class="text-lighten-4">Rest.li is an open source REST framework for building robust, scalable RESTful architectures using type-safe bindings and asynchronous, non-blocking IO. Rest.li fills a niche for applying RESTful principles at scale with an end-to-end developer workflow for building REST APIs, which promotes clean REST practices, uniform interface design and consistent data modeling.</p>
        </div>
        <div class="col s5 offset-s1">
          <h5 class="black-text">Community</h5>
          <ul>
              <li>GitHub <a class="" href="https://github.com/linkedin/rest.li">Rest.li</a></li>
              <li>LinkedIn <a class="" href="https://www.linkedin.com/groups/4855943/">Rest.li Group</a></li>
            <li>Follow us on twitter: <a class="" href="https://twitter.com/rest_li"> @rest_li</a></li>
            <li>Issue Tracking: <a class="" href="https://github.com/linkedin/rest.li/issues">GitHub issue tracking</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="footer-copyright">
        <div class="container">
            <div class="row">
              <div class="col s6">
                      Copyright 2018 LinkedIn Corporation </br>
                      This work is licensed under a <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.  </br>
                      For clarity, no trademark is licensed.
                      </br></br>
              </div>
              <div class="col s5 offset-s1">
                      This work was made by using Jekyll (and a Jekyll Starter Template)</br>
                      <a target="_blank" href="https://github.com/macrod68/jekyll-materialize-starter-template">https://github.com/macrod68/jekyll-materialize-starter-template</a></br>
                      Copyright © 2017 Marco Damiani. Powered by <a target="_blank" href="http://jekyllrb.com/">Jekyll</a></br>
                      License:<a target="_blank" href="https://opensource.org/licenses/MIT">MIT</a>
              </div>
            </div>
        </div>
    </div>
    <script>
      $(function() {
        return $("h2, h3, h4, h5, h6").each(function(i, el) {
          var $el, icon, id;
          $el = $(el);
          id = $el.attr('id');
          icon = '<i class="fa fa-link"></i>';
          if (id) {
            return $el.append($("<a />").addClass("header-link").attr("href", "#" + id).html(icon));
          }
        });
      });
      </script>
</footer>

      
    <!--  Scripts-->                                                                               
<script src="/rest.li/assets/js/jquery.min.js"></script>
<script src="/rest.li/assets/js/materialize.min.js"></script>
<script src="/rest.li/assets/js/init.js"></script>

  </body>

</html>
