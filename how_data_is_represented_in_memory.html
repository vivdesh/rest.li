<!DOCTYPE html>
<html lang="en">

  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-128576866-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-128576866-1');
    </script>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>

    <title>How Data is Represented in Memory</title>
    <meta name="description" content="Rest.li how data is represented in memory." />

    <link rel="icon" type="image/png" href="/rest.li/assets/images/icon_pegasus.png">
  
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" type="text/css" media="screen,projection" href="/rest.li/assets/css/main.css">
    <link rel="canonical" href="/rest.li/how_data_is_represented_in_memory" />
    <link rel="alternate" type="application/rss+xml" title="rest.li" href="/rest.li/feed.xml" />

    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">

    <script src="//code.jquery.com/jquery-3.0.0.min.js"></script>
    <script src="/rest.li/assets/js/search-input.js"></script>
    

    
    <script>
       $(function() {
          $("h1").addClass("no_toc");
       });
    </script>
</head>


  <body>

    <nav class="dark-grey" role="navigation">
    <div class="nav-wrapper container"><a id="logo-container" class="brand-logo" href="/rest.li/">Rest.li</a>
      <ul class="right hide-on-med-and-down">
        
        <li>
          <a href="/rest.li/get_started/quick_start" >
            Getting Started
          </a>
        </li>
        
        <li>
          <a href="/rest.li/user_guide/server_architecture" >
            User Guide
          </a>
        </li>
        
        <li>
          <a href="/rest.li/spec/protocol" >
            API Reference
          </a>
        </li>
        
        <li>
          <a href="/rest.li/contribute/howto" >
            Contribute
          </a>
        </li>
        
          <li>
            <div class="center row" >
              <div class="col s12 ">
                <div class="row">
                  <div class="input-field col s6 s12 min">
                      <i id="search-txt" class="material-icons prefix">search</i>
                      <input type="text" id="search-input">
                    </div>
                  </div>
                </div>
              </div>
          </li>
          <li>
              <a id="github-menu" href="http://github.com/linkedin/rest.li/" >
                   <i class="fa fa-github"></i>
                </a>
          </li>
          </ul>
      <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
    </div>
</nav>



        <div class="container">
        <div class="row">
                <div class="col s12 m4 l3"> 
               
                    
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">User Guide</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/user_guide/server_architecture">Rest.li Architecture</a></li>
                       
                         <li><a href="/rest.li/user_guide/restli_server">Rest.li Server</a></li>
                       
                         <li><a href="/rest.li/user_guide/restli_client">Rest.li Client Framework</a></li>
                       
                         <li><a href="/rest.li/user_guide/unstructured_data">Unstructured Data</a></li>
                       
                         <li><a href="/rest.li/Components">Components</a></li>
                       
                         <li><a href="/rest.li/Asynchronous-Servers-and-Clients-in-Rest_li">Asynchronous in Rest.li</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">Data Schemas</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/pdl_schema">PDL Schema</a></li>
                       
                         <li><a href="/rest.li/pdsc_syntax">PDSC Syntax</a></li>
                       
                         <li><a href="/rest.li/pdl_migration">Migrating from PDSC to PDL</a></li>
                       
                         <li><a href="/rest.li/avro_translation">Avro Translation</a></li>
                       
                         <li><a href="/rest.li/java_binding">Java Binding</a></li>
                       
                         <li><a href="/rest.li/annotation_processor">Schema Annotation Processor</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">Modeling Resources</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/modeling/modeling">Modeling Resources</a></li>
                       
                         <li><a href="/rest.li/modeling/compatibility_check">Snapshots and Resource Compatibility Checking</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">Data</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/how_data_is_serialized_for_transport">How Data is Serialized for Transport</a></li>
                       
                         <li><a href="/rest.li/how_data_is_represented_in_memory">How Data is Represented in Memory</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">Main concepts</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/Rest_li-Filters">Filters</a></li>
                       
                         <li><a href="/rest.li/Projections">Projections</a></li>
                       
                         <li><a href="/rest.li/pathspec">PathSpecs</a></li>
                       
                         <li><a href="/rest.li/Validation-in-Rest_li">Validation</a></li>
                       
                         <li><a href="/rest.li/Attachment-Streaming">Attachment Streaming</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">Mutli-language</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/multi_language_compatibility_matrix">Compatibility Matrix</a></li>
                       
                         <li><a href="/rest.li/test_suite">Test Suite</a></li>
                       
                         <li><a href="https://github.com/mchen07/restli-csharp">C#</a></li>
                       
                         <li><a href="/rest.li/Scala-Integration">Scala Integration</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">Testing</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/Writing-unit-tests-for-Rest_li-clients-and-servers">Writing Unit Tests</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">How to</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/Send-Rest_li-Request-Query-In-Request-Body">Send Request Query in the Body</a></li>
                       
                         <li><a href="/rest.li/How-to-use-projections-in-Java">Use Projections</a></li>
                       
                         <li><a href="/rest.li/Rest_li_Avro_conversions">Avro Conversion</a></li>
                       
                         <li><a href="/rest.li/Compression">Compression</a></li>
                       
                         <li><a href="/rest.li/Rest_li-2_x-upgrade-instructions">Migrate to Rest.li 2.x</a></li>
                       
                         <li><a href="/rest.li/testsuite_how_to">Test Suite</a></li>
                       
                         <li><a href="/rest.li/howto_add_new_language">Test Suite - Add New Language</a></li>
                       
                         <li><a href="/rest.li/user_guide/service_errors_java">Configure Service Errors in Java</a></li>
                       
                        </ul>
                     </ul>
                        
                   
                    
                     <ul class="nav_items">
                        <li><span class="nav_sub-title">FAQ</span></li>
                        <ul>
                       
                         <li><a href="/rest.li/Data-FAQ">Rest.li - FAQ</a></li>
                       
                         <li><a href="/rest.li/testsuite_troubleshooting">Test Suite - Troubleshooting</a></li>
                       
                        </ul>
                     </ul>
                        
                    </div>
                     <div class="markdown-body col s12 m3 l9">
                            <h1 id="how-data-is-represented-in-memory">How Data is Represented in Memory</h1>

<h2 id="contents">Contents</h2>

<ul>
  <li><a href="#the-data-layer">The Data Layer</a></li>
  <li><a href="#the-data-schema-layer">The Data Schema Layer</a></li>
  <li><a href="#the-data-template-layer">The Data Template Layer</a></li>
</ul>

<p>There are three architectural layers that define how data is stored
in-memory and provide the API’s used to access this data.</p>

<ul>
  <li>The first layer is the Data layer. This is the storage layer and is
totally generic, for example, not schema aware.</li>
  <li>The second layer is the Data Schema layer. This layer provides the
in-memory representation of the data schema.</li>
  <li>The third layer is the Data Template layer. This layer provides Java
type-safe access to data stored by the Data layer.</li>
</ul>

<h2 id="the-data-layer">The Data Layer</h2>

<p>At the conceptual level, the Data layer provides generic in-memory
representations of JSON objects and arrays. A <code class="highlighter-rouge">DataMap</code> and a <code class="highlighter-rouge">DataList</code>
provide the in-memory representation of a JSON object and a JSON array
respectively. These DataMaps and DataLists are the primary in-memory
data structures that store and manage data belonging to instances of
complex schema types. This layer allows data to be serialized and
de-serialized into in-memory representations without requiring the
schema to be known. In fact, the Data layer is not aware of schemas and
do not require a schema to access the underlying data.</p>

<p>The main motivations behind the Data layer are:</p>

<ul>
  <li>To allow generic access to the underlying data for building generic
assembly and query engines. These engines need a generic data
representation to data access. Furthermore, they may need to
construct new instances from dynamically executed expressions, such
as joins and projections. The schema of these instances depend on
the expression executed, and could not be known in advance.</li>
  <li>To facilitate schema evolution. The Data layer enables “use what you
know and pass on what you don’t”. It allows new fields to be added
and passed through intermediate nodes in the service graph without
requiring these nodes to also have their schemas updated to include
these new fields.</li>
  <li>To permit some Java Virtual Machine service calls to be optimized by
avoiding serialization.</li>
</ul>

<h3 id="constraints">Constraints</h3>

<p>The Data layer implements the following constraints:</p>

<ul>
  <li>It permits only allowed types to be stored as values.</li>
  <li>All non-container values (not <code class="highlighter-rouge">DataMap</code> and not <code class="highlighter-rouge">DataList</code>) are
immutable.</li>
  <li>Null is not a value. The <code class="highlighter-rouge">Data.NULL</code> constant is used to represent
null deserialized from or to be serialized to JSON. Avoiding null
Java values reduces complexity by reducing the number of states a
field may have. Without null values, a field can have two states,
“absent” or “has valid value”. If null values are permitted, a
field can have three states, “absent”, “has null value”, and “has
valid value”.</li>
  <li>The object graph is always acyclic. The object graph is the graph of
objects connected by DataMaps and DataLists.</li>
  <li>The key type for a <code class="highlighter-rouge">DataMap</code> is always <code class="highlighter-rouge">java.lang.String</code>.</li>
</ul>

<h3 id="additional-features">Additional Features</h3>

<p>The Data layer provides the following additional features (above and
beyond what the Java library provides.)</p>

<ul>
  <li>A <code class="highlighter-rouge">DataMap</code> and <code class="highlighter-rouge">DataList</code> may be made read-only. Once it is
read-only, mutations will no longer be allowed and will throw
<code class="highlighter-rouge">java.lang.UnsupportedOperationException</code>. There is no way to revert
a read-only instance to read-write.</li>
  <li>Access instrumentation. See <code class="highlighter-rouge">com.linkedin.data.Instrumentable</code> for
details.</li>
  <li>Implements deep copy that should return a object graph that is
isomorphic with the source, i.e. the copy will retain the directed
acyclic graph structure of the source.</li>
</ul>

<h3 id="allowed-value-types">Allowed Value Types</h3>

<ul>
  <li><code class="highlighter-rouge">java.lang.Integer</code></li>
  <li><code class="highlighter-rouge">java.lang.Long</code></li>
  <li><code class="highlighter-rouge">java.lang.Float</code></li>
  <li><code class="highlighter-rouge">java.lang.Double</code></li>
  <li><code class="highlighter-rouge">java.lang.Boolean</code></li>
  <li><code class="highlighter-rouge">java.lang.String</code></li>
  <li><code class="highlighter-rouge">com.linkedin.data.ByteString</code></li>
  <li><code class="highlighter-rouge">com.linkedin.data.DataMap</code></li>
  <li><code class="highlighter-rouge">com.linkedin.data.DataList</code></li>
</ul>

<p>Note Enum types are not allowed because enum types are not generic and
portable. Enum values are stored as a string.</p>

<h3 id="datacomplex">DataComplex</h3>

<p>Both <code class="highlighter-rouge">DataMap</code> and <code class="highlighter-rouge">DataList</code> implement the
<code class="highlighter-rouge">com.linkedin.data.DataComplex</code> interface. This interface declares the
methods that supports the additional features common to a <code class="highlighter-rouge">DataMap</code> and
a <code class="highlighter-rouge">DataList</code>. These methods are:</p>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Declared by</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">DataComplex clone()</code></td>
      <td><code class="highlighter-rouge">DataComplex</code></td>
      <td>A shallow copy of the instance. <br />The read-only state is not copied, the clone will be mutable. <br />The instrumentation state is also not copied. <br />Although <code class="highlighter-rouge">java.lang.CloneNotSupportedException</code> is declared in the throws clause, the method should not throw this exception.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">DataComplex copy()</code> <br /></td>
      <td><code class="highlighter-rouge">DataComplex</code> <br /></td>
      <td>A deep copy of the object graph rooted at the instance. The copy will be isomorphic to the original. <br />The read-only state is not deep copied, and the new <code class="highlighter-rouge">DataComplex</code> copies will be mutable. <br />The instrumentation state is also not copied. <br />Although <code class="highlighter-rouge">java.lang.CloneNotSupportedException</code> is declared in the throws clause, the method should not throw this exception.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">void setReadOnly()</code> <br /></td>
      <td><code class="highlighter-rouge">CowCommon</code> <br /></td>
      <td>Make the instance read-only. It does not affect the read-only state of contained <code class="highlighter-rouge">DataComplex</code> values. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">boolean isReadOnly()</code> <br /></td>
      <td><code class="highlighter-rouge">CowCommon</code> <br /></td>
      <td>Whether the instance is in read-only state. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">void makeReadOnly()</code> <br /></td>
      <td><code class="highlighter-rouge">DataComplex</code> <br /></td>
      <td>Make the object graph rooted at this instance read-only. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">void isMadeReadOnly()</code> <br /></td>
      <td><code class="highlighter-rouge">DataComplex</code> <br /></td>
      <td>Whether the object graph rooted at this instance has been made read-only. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">Collection&lt;Object&gt; values()</code> <br /></td>
      <td><code class="highlighter-rouge">DataComplex</code> <br /></td>
      <td>Returns the values stored in the <code class="highlighter-rouge">DataComplex</code> instance, i.e. returns the values of a <code class="highlighter-rouge">DataMap</code> or the elements of a <code class="highlighter-rouge">DataList</code>. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">void startInstrumentatingAccess()</code> <br /></td>
      <td><code class="highlighter-rouge">Instrumentable</code> <br /></td>
      <td>Starts instrumenting access. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">void stopInstrumentingAccess()</code> <br /></td>
      <td><code class="highlighter-rouge">Instrumentable</code> <br /></td>
      <td>Stops instrumenting access. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">void clearInstrumentedData()</code> <br /></td>
      <td><code class="highlighter-rouge">Instrumentable</code> <br /></td>
      <td>Clears instrumentation data collected. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">void collectInstrumentedData(...)</code> <br /></td>
      <td><code class="highlighter-rouge">Instrumentable</code> <br /></td>
      <td>Collect data gathered when instrumentation was enabled. <br /></td>
    </tr>
  </tbody>
</table>

<p>Note: Details on <code class="highlighter-rouge">CowCommon</code>, <code class="highlighter-rouge">CowMap</code>, and <code class="highlighter-rouge">CowList</code> have been omitted
or covered under <code class="highlighter-rouge">DataComplex</code>. Cow provides copy-on-write
functionality. The semantics of <code class="highlighter-rouge">CowMap</code> and <code class="highlighter-rouge">CowList</code> is similar to
<code class="highlighter-rouge">HashMap</code> and <code class="highlighter-rouge">ArrayList</code>.</p>

<h3 id="datamap">DataMap</h3>

<p>The <code class="highlighter-rouge">com.linkedin.data.DataMap</code> class has the following characteristics:</p>

<ul>
  <li><code class="highlighter-rouge">DataMap</code> implements <code class="highlighter-rouge">java.util.Map&lt;String, Object&gt;</code>.</li>
  <li>Its <code class="highlighter-rouge">entrySet()</code>, <code class="highlighter-rouge">keySet()</code>, and <code class="highlighter-rouge">values()</code> methods return
unmodifiable set and collection views.</li>
  <li>Its <code class="highlighter-rouge">clone()</code> and <code class="highlighter-rouge">copy()</code> methods returns a <code class="highlighter-rouge">DataMap</code>.</li>
</ul>

<h3 id="datalist">DataList</h3>

<p>The <code class="highlighter-rouge">com.linkedin.data.DataList</code> class has the following
characteristics.</p>

<ul>
  <li><code class="highlighter-rouge">DataList</code> implements <code class="highlighter-rouge">java.util.List&lt;Object&gt;</code>.</li>
  <li>Its <code class="highlighter-rouge">clone()</code> and <code class="highlighter-rouge">copy()</code> method return a <code class="highlighter-rouge">DataList</code>.</li>
</ul>

<h2 id="the-data-schema-layer">The Data Schema Layer</h2>

<p>The Data Schema layer provides the in-memory representation of the data
schema. The Data Schema Layer provides the following main features:</p>

<ul>
  <li>Parse a JSON encoded schema into in-memory representation using
classes in this layer</li>
  <li>Validate a Data object against a schema</li>
</ul>

<p>Their common base class for Data Schema classes is
<code class="highlighter-rouge">com.linkedin.data.schema.DataSchema</code>. It defines the following methods:</p>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">Type getType()</code> <br /></td>
      <td>Provide the type of the schema, can be <code class="highlighter-rouge">BOOLEAN</code>, <code class="highlighter-rouge">INT</code>, <code class="highlighter-rouge">LONG</code>, <code class="highlighter-rouge">FLOAT</code>, <code class="highlighter-rouge">DOUBLE</code>, <code class="highlighter-rouge">BYTES</code>, <code class="highlighter-rouge">STRING</code>, <code class="highlighter-rouge">FIXED</code>, <code class="highlighter-rouge">ENUM</code>, <code class="highlighter-rouge">NULL</code>, <code class="highlighter-rouge">ARRAY</code>, <code class="highlighter-rouge">RECORD</code>, <code class="highlighter-rouge">MAP</code>, <code class="highlighter-rouge">UNION</code>. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">boolean hasError()</code> <br /></td>
      <td>Whether the schema definition contains at least one error. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">boolean isPrimitive()</code> <br /></td>
      <td>Whether the schema type is a primitive schema type. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">boolean isComplex()</code> <br /></td>
      <td>Whether the schema type is a complex schema type, i.e. not primitive type. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">Map&lt;String,Object&gt; getProperties()</code> <br /></td>
      <td>Return the properties of the schema. These properties are the keys and values from the JSON fields in complex schema definitions that are not processed and interpreted by the schema parser. For primitive types, this method always return an immutable empty map. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">String getUnionMemberKey()</code> <br /></td>
      <td>If this type is used as a member of a union without an alias, this will be the key that uniquely identifies/selects this type within the union. This value of this key is as defined by the Avro 1.4.1 specification for JSON serialization. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">String toString()</code> <br /></td>
      <td>A more human consumable formatting of the schema in JSON encoding. Space will added between fields, items, names, values, … etc. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">Type getDereferencedType</code> <br /></td>
      <td>If the type is a typeref, it will follow the typeref reference chain and return the type referenced at the end of the typeref chain. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">DataSchema getDereferencedSchema</code> <br /></td>
      <td>If the type is a typeref, it will follow the typeref reference chain and return the DataSchema referenced at the end of the typeref chain. <br /></td>
    </tr>
  </tbody>
</table>

<p>The following table shows the mapping of schema types to Data Schema
classes.</p>

<table>
  <thead>
    <tr>
      <th>Schema Type <br /></th>
      <th>Data Schema class <br /></th>
      <th>Relevant Specific Attributes <br /></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>int <br /></td>
      <td><code class="highlighter-rouge">IntegerDataSchema</code> <br /></td>
      <td> </td>
    </tr>
    <tr>
      <td>long <br /></td>
      <td><code class="highlighter-rouge">LongDataSchema</code> <br /></td>
      <td> </td>
    </tr>
    <tr>
      <td>float <br /></td>
      <td><code class="highlighter-rouge">FloatDataSchema</code> <br /></td>
      <td> </td>
    </tr>
    <tr>
      <td>double <br /></td>
      <td><code class="highlighter-rouge">DoubleDataSchema</code> <br /></td>
      <td> </td>
    </tr>
    <tr>
      <td>boolean <br /></td>
      <td><code class="highlighter-rouge">BooleanDataSchema</code> <br /></td>
      <td> </td>
    </tr>
    <tr>
      <td>string <br /></td>
      <td><code class="highlighter-rouge">StringDataSchema</code> <br /></td>
      <td> </td>
    </tr>
    <tr>
      <td>bytes <br /></td>
      <td><code class="highlighter-rouge">BytesDataSchema</code> <br /></td>
      <td> </td>
    </tr>
    <tr>
      <td>enum <br /></td>
      <td><code class="highlighter-rouge">EnumDataSchema</code> <br /></td>
      <td><code class="highlighter-rouge">List&lt;String&gt; getSymbols()</code> <br /><code class="highlighter-rouge">int index(String symbol)</code> <br /><code class="highlighter-rouge">boolean contains(String symbol)</code> <br /></td>
    </tr>
    <tr>
      <td>array <br /></td>
      <td><code class="highlighter-rouge">ArrayDataSchema</code> <br /></td>
      <td><code class="highlighter-rouge">DataSchema getItems()</code> <br /></td>
    </tr>
    <tr>
      <td>map <br /></td>
      <td><code class="highlighter-rouge">MapDataSchema</code> <br /></td>
      <td><code class="highlighter-rouge">DataSchema getValues()</code></td>
    </tr>
    <tr>
      <td>fixed <br /></td>
      <td><code class="highlighter-rouge">FixedDataSchema</code> <br /></td>
      <td><code class="highlighter-rouge">int getSize()</code> <br /></td>
    </tr>
    <tr>
      <td>record, error <br /></td>
      <td><code class="highlighter-rouge">RecordDataSchema</code> <br /></td>
      <td><code class="highlighter-rouge">RecordType recordType()</code> (record or error) <br /><code class="highlighter-rouge">boolean isErrorRecord()</code> <br /><code class="highlighter-rouge">List&lt;Field&gt; getFields()</code> <br /><code class="highlighter-rouge">int index(String fieldName)</code> <br /><code class="highlighter-rouge">boolean contains(String fieldName)</code> <br /><code class="highlighter-rouge">Field getField(String fieldName)</code> <br /></td>
    </tr>
    <tr>
      <td>union <br /></td>
      <td><code class="highlighter-rouge">UnionDataSchema</code> <br /></td>
      <td><code class="highlighter-rouge">List&lt;Member&gt; getMembers()</code> <br /><code class="highlighter-rouge">boolean contains(String memberKey)</code> <br /><code class="highlighter-rouge">DataSchema getTypeByMemberKey(String memberKey)</code> <br /><code class="highlighter-rouge">boolean areMembersAliased()</code> <br /></td>
    </tr>
    <tr>
      <td>null <br /></td>
      <td><code class="highlighter-rouge">NullDataSchema</code> <br /></td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h2 id="data-to-schema-validation">Data to Schema Validation</h2>

<p>The <code class="highlighter-rouge">ValidateDataAgainstSchema</code> class provides methods for validating
Data layer instances with a Data Schema. The <code class="highlighter-rouge">ValidationOption</code> class is
used to specify how validation should be performed and how to fix-up the
input Data layer objects to conform to the schema. There are two
independently configuration options:</p>

<ul>
  <li><code class="highlighter-rouge">RequiredMode</code> option indicates how required fields should be
handled during validation.</li>
  <li><code class="highlighter-rouge">CoercionMode</code> option indicates how to coerce Data layer objects to
the Java type corresponding to their schema type.</li>
</ul>

<p>Example Usage:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">ValidationResult</span> <span class="n">validationResult</span> <span class="o">=</span>
<span class="nc">ValidateDataAgainstSchema</span><span class="o">.</span><span class="na">validate</span><span class="o">(</span><span class="n">dataTemplate</span><span class="o">,</span> <span class="n">dataTemplate</span><span class="o">.</span><span class="na">schema</span><span class="o">(),</span>
<span class="k">new</span> <span class="nf">ValidationOptions</span><span class="o">());</span>  
<span class="k">if</span> <span class="o">(!</span><span class="n">validationResult</span><span class="o">.</span><span class="na">isValid</span><span class="o">())</span>  
<span class="o">{</span>  
  <span class="c1">// do something  </span>
<span class="o">}</span>  
</code></pre></div></div>

<h3 id="requiredmode">RequiredMode</h3>

<p>The available RequiredModes are:</p>

<ul>
  <li><code class="highlighter-rouge">IGNORE</code><br />
Required fields may be absent. Do not indicate a validation error if
a required field is absent.</li>
  <li><code class="highlighter-rouge">MUST_BE_PRESENT</code><br />
If a required field is absent, then validation fails. Validation
will fail even if the required field has been declared with a
default value.</li>
  <li><code class="highlighter-rouge">CAN_BE_ABSENT_IF_HAS_DEFAULT</code><br />
If a required field is absent and the field has not been declared
with a default value, then validation fails. Validation will not
attempt to modify the field to provide it with the default value.</li>
  <li><code class="highlighter-rouge">FIXUP_ABSENT_WITH_DEFAULT</code><br />
If a required field is absent and it cannot be fixed-up with a
default value, then validation fails.<br />
This mode will attempt to modify an absent field to provide it with
the field’s default value.<br />
If the field does not have a default value, validation fails.<br />
If the field has a default value, validation will attempt to set the
field’s value to the default value.<br />
This attempt may fail if fixup is not enabled or the <code class="highlighter-rouge">DataMap</code>
containing the field cannot be modified because it is read-only.<br />
The provided default value will be read-only.</li>
</ul>

<h3 id="coercionmode">CoercionMode</h3>

<p>Since JSON does not have or encode enough information on the actual
types of primitives, and schema types like bytes and fixed are not
represented by native types in JSON, the initial de-serialized in-memory
representation of instances of these types may not be the actual type
specified in the schema. For example, when de-serializing the number 52,
it will be de-serialized into an <code class="highlighter-rouge">Integer</code> even though the schema type
may be a <code class="highlighter-rouge">Long</code>. This is because a schema is not required to serialize
or de-serialize.</p>

<p>When the data is accessed via schema aware language binding like the
Java binding, the conversion/coercion can occur at the language binding
layer. In cases when the language binding is not used, it may be
desirable to fix-up a Data layer object by coercing it the Java type
corresponding to the object’s schema. For example, the appropriate Java
type the above example would be a <code class="highlighter-rouge">Long</code>. Another fix-up would be to
fixup Avro-specified string encoding of binary data (bytes or fixed)
into a <code class="highlighter-rouge">ByteString</code>. In another case, it may be desirable to coerce the
string representation of a value to the Java type corresponding to the
object’s schema. For example, coerce “65” to 65, the integer, if the
schema type is “int”.</p>

<p>Whether an how coercion is performed is specified by <code class="highlighter-rouge">CoercionMode</code>. The
available CoercionModes are:</p>

<ul>
  <li><code class="highlighter-rouge">OFF</code><br />
No coercion is performed.</li>
  <li><code class="highlighter-rouge">NORMAL</code><br />
Numeric types are coerced to the schema’s corresponding Java numeric
type. Avro-encoded binary strings are coerced to ByteString if the
schema type is bytes or fixed.</li>
  <li><code class="highlighter-rouge">STRING_TO_PRIMITIVE</code><br />
Includes all the coercions performed by <code class="highlighter-rouge">NORMAL</code>. In addition, also
coerces string representations of numbers to the schema’s
corresponding numeric type, and string representation of booleans
(“true” or “false” case-insenstive) to <code class="highlighter-rouge">Boolean</code>.</li>
</ul>

<p><a name="NormalMode"></a></p>

<h4 id="normal-coercion-mode"><code class="highlighter-rouge">NORMAL</code> Coercion Mode</h4>

<p>The following table provides additional details on the <code class="highlighter-rouge">NORMAL</code>
validation and coercion mode.</p>

<table>
  <thead>
    <tr>
      <th>Schema Type <br /></th>
      <th>Post-coercion Java Type <br /></th>
      <th>Pre-coercion Input Java Types <br /></th>
      <th>Validation Performed <br /></th>
      <th>Coercion Method</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>int <br /></td>
      <td><code class="highlighter-rouge">java.lang.Integer</code> <br /></td>
      <td><code class="highlighter-rouge">java.lang.Number</code> (1) <br /></td>
      <td>Value must be a <code class="highlighter-rouge">Number</code>. <br /></td>
      <td><code class="highlighter-rouge">Number.intValue()</code> <br /></td>
    </tr>
    <tr>
      <td>long <br /></td>
      <td><code class="highlighter-rouge">java.lang.Long</code> <br /></td>
      <td><code class="highlighter-rouge">java.lang.Number</code> (1)</td>
      <td>Value must be a <code class="highlighter-rouge">Number</code>. <br /></td>
      <td><code class="highlighter-rouge">Number.longValue()</code> <br /></td>
    </tr>
    <tr>
      <td>float <br /></td>
      <td><code class="highlighter-rouge">java.lang.Float</code> <br /></td>
      <td><code class="highlighter-rouge">java.lang.Number</code> (1)</td>
      <td>Value must be a <code class="highlighter-rouge">Number</code>.</td>
      <td><code class="highlighter-rouge">Number.floatValue()</code> <br /></td>
    </tr>
    <tr>
      <td>double <br /></td>
      <td><code class="highlighter-rouge">java.lang.Double</code> <br /></td>
      <td><code class="highlighter-rouge">java.lang.Number</code> (1)</td>
      <td>Value must be a <code class="highlighter-rouge">Number</code>.</td>
      <td><code class="highlighter-rouge">Number.doubleValue()</code> <br /></td>
    </tr>
    <tr>
      <td>boolean <br /></td>
      <td><code class="highlighter-rouge">java.lang.Boolean</code> <br /></td>
      <td><code class="highlighter-rouge">java.lang.Boolean</code> (2) <br /></td>
      <td>Value must be a <code class="highlighter-rouge">Boolean</code>. <br /></td>
      <td> </td>
    </tr>
    <tr>
      <td>string <br /></td>
      <td><code class="highlighter-rouge">java.lang.String</code> <br /></td>
      <td><code class="highlighter-rouge">java.lang.String</code> (2) <br /></td>
      <td>Value must be a <code class="highlighter-rouge">String</code>. <br /></td>
      <td> </td>
    </tr>
    <tr>
      <td>bytes <br /></td>
      <td><code class="highlighter-rouge">com.linkedin.data.ByteString</code> <br /></td>
      <td><code class="highlighter-rouge">com.linkedin.data.ByteString</code>, <code class="highlighter-rouge">java.lang.String</code> (3) <br /></td>
      <td>If the value is a <code class="highlighter-rouge">String</code>, the <code class="highlighter-rouge">String</code> must be a valid encoding of binary data as specified by the Avro specification for encoding bytes into a JSON string. <br /></td>
      <td><code class="highlighter-rouge">ByteString.copyFromAvroString()</code> <br /></td>
    </tr>
    <tr>
      <td>enum <br /></td>
      <td><code class="highlighter-rouge">java.lang.String</code> <br /></td>
      <td><code class="highlighter-rouge">java.lang.String</code> <br /></td>
      <td>The value must be a symbol defined by the enum schema. <br /></td>
      <td> </td>
    </tr>
    <tr>
      <td>array <br /></td>
      <td><code class="highlighter-rouge">com.linkedin.data.DataList</code> <br /></td>
      <td><code class="highlighter-rouge">com.linkedin.data.DataList</code> (2) <br /></td>
      <td>Each element in the <code class="highlighter-rouge">DataList</code> must be a valid Java type for the schema’s item type. For example, if the schema is an array of longs, then every element in the <code class="highlighter-rouge">DataList</code> must be a <code class="highlighter-rouge">Number</code>. <br /></td>
      <td> </td>
    </tr>
    <tr>
      <td>map <br /></td>
      <td><code class="highlighter-rouge">com.linkedin.data.DataMap</code> <br /></td>
      <td><code class="highlighter-rouge">com.linkedin.data.DataMap</code> (2) <br /></td>
      <td>Each value in the <code class="highlighter-rouge">DataMap</code> must be a valid Java type for the schema’s value type. For example, if the schema is a map of longs, then every value in the <code class="highlighter-rouge">DataMap</code> must be a <code class="highlighter-rouge">Number</code>.</td>
      <td> </td>
    </tr>
    <tr>
      <td>fixed <br /></td>
      <td><code class="highlighter-rouge">com.linkedin.data.ByteString</code> <br /></td>
      <td><code class="highlighter-rouge">com.linked.data.ByteString</code> (2), <code class="highlighter-rouge">java.lang.String</code> (3) <br /></td>
      <td>If the value is a <code class="highlighter-rouge">String</code>, the <code class="highlighter-rouge">String</code> must be a valid encoding of binary data as specified by the Avro specification for encoding bytes into a JSON string and the correct size for the fixed schema type. <br />If the value is a <code class="highlighter-rouge">ByteString</code>, the <code class="highlighter-rouge">ByteString</code> must be the correct size for the fixed schema type. <br /></td>
      <td><code class="highlighter-rouge">ByteString.copyFromAvroString()</code></td>
    </tr>
    <tr>
      <td>record <br /></td>
      <td><code class="highlighter-rouge">com.linkedin.data.DataMap</code> <br /></td>
      <td><code class="highlighter-rouge">com.linkedin.data.DataMap</code> (2) <br /></td>
      <td>Each key in the <code class="highlighter-rouge">DataMap</code> will be used lookup a field in the record schema. The value associated with this key must be a valid Java type for the field’s type. <br />If the required validation option is enabled, then all required fields must also be present. <br /></td>
      <td> </td>
    </tr>
    <tr>
      <td>union <br /></td>
      <td><code class="highlighter-rouge">com.linkedin.data.DataMap</code> <br /></td>
      <td><code class="highlighter-rouge">java.lang.String</code>, <code class="highlighter-rouge">com.linkedin.data.DataMap</code> (2) <br /></td>
      <td>If the value is a <code class="highlighter-rouge">String</code>, the value must be <code class="highlighter-rouge">Data.NULL</code>. <br />If the value is a <code class="highlighter-rouge">DataMap</code>, then the <code class="highlighter-rouge">DataMap</code> must have exactly one entry. The key of the entry must identify a member of the union schema, and the value must be a valid type for the identified union member’s type. <br /></td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p>(1) Even though <code class="highlighter-rouge">Number</code> type is allowed and used for fixing up to the
desired type, the Data layer only allows <code class="highlighter-rouge">Integer</code>, <code class="highlighter-rouge">Long</code>, <code class="highlighter-rouge">Float</code>, and
<code class="highlighter-rouge">Double</code> values to be held in a <code class="highlighter-rouge">DataMap</code> or <code class="highlighter-rouge">DataList</code>.<br />
(2) No fix-up is performed.<br />
(3) the <code class="highlighter-rouge">String</code> must be a valid encoding of binary data as specified by
the Avro specification for encoding bytes into a JSON string.</p>

<h4 id="string_to_primitive-coercion-mode"><code class="highlighter-rouge">STRING_TO_PRIMITIVE</code> Coercion Mode</h4>

<p>This mode includes allowed input types and associated validation and
coercion’s of <code class="highlighter-rouge">NORMAL</code>. In addition, it allows the following additional
input types and performs the following coercions on these additional
allowed input types.</p>

<table>
  <thead>
    <tr>
      <th>Schema Type <br /></th>
      <th>Post-coercion Java Type <br /></th>
      <th>Pre-coercion Input Java Types <br /></th>
      <th>Validation Performed <br /></th>
      <th>_. Coercion Method <br /></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>int <br /></td>
      <td><code class="highlighter-rouge">java.lang.Integer</code> <br /></td>
      <td><code class="highlighter-rouge">java.lang.String</code> <br /></td>
      <td>If value is a <code class="highlighter-rouge">String</code>, it must be acceptable to <code class="highlighter-rouge">BigDecimal(String val)</code>, else it has to be a <code class="highlighter-rouge">Number</code> (see “<a href="#normal-coercion-mode"><code class="highlighter-rouge">NORMAL</code></a>”) <br /></td>
      <td><code class="highlighter-rouge">(new BigDecimal(value)).intValue()</code> <br /></td>
    </tr>
    <tr>
      <td>long <br /></td>
      <td><code class="highlighter-rouge">java.lang.Long</code> <br /></td>
      <td><code class="highlighter-rouge">java.lang.String</code></td>
      <td>If value is a <code class="highlighter-rouge">String</code>, it must be acceptable to <code class="highlighter-rouge">BigDecimal(String val)</code>, else it has to be a <code class="highlighter-rouge">Number</code> (see “<a href="#normal-coercion-mode"><code class="highlighter-rouge">NORMAL</code></a>”)</td>
      <td><code class="highlighter-rouge">(new BigDecimal(value)).longValue()</code></td>
    </tr>
    <tr>
      <td>float <br /></td>
      <td><code class="highlighter-rouge">java.lang.Float</code> <br /></td>
      <td><code class="highlighter-rouge">java.lang.String</code></td>
      <td>If value is a <code class="highlighter-rouge">String</code>, it must be acceptable to <code class="highlighter-rouge">BigDecimal(String val)</code>, else it has to be a <code class="highlighter-rouge">Number</code> (see “<a href="#normal-coercion-mode"><code class="highlighter-rouge">NORMAL</code></a>”) <br /></td>
      <td><code class="highlighter-rouge">(new BigDecimal(value)).floatValue()</code></td>
    </tr>
    <tr>
      <td>double <br /></td>
      <td><code class="highlighter-rouge">java.lang.Double</code> <br /></td>
      <td><code class="highlighter-rouge">java.lang.String</code></td>
      <td>If value is a <code class="highlighter-rouge">String</code>, it must be acceptable to <code class="highlighter-rouge">BigDecimal(String val)</code>, else it has to be a <code class="highlighter-rouge">Number</code> (see “<a href="#normal-coercion-mode"><code class="highlighter-rouge">NORMAL</code></a>”) <br /></td>
      <td><code class="highlighter-rouge">(new BigDecimal(value)).doubleValue()</code></td>
    </tr>
    <tr>
      <td>boolean <br /></td>
      <td><code class="highlighter-rouge">java.lang.Boolean</code> <br /></td>
      <td><code class="highlighter-rouge">java.lang.String</code></td>
      <td>if value is a <code class="highlighter-rouge">String</code>, its value must be either <code class="highlighter-rouge">"true"</code> or <code class="highlighter-rouge">"false"</code> ignoring case, else it has to be a <code class="highlighter-rouge">Boolean</code> (see “<a href="#normal-coercion-mode"><code class="highlighter-rouge">NORMAL</code></a>”) <br /></td>
      <td>&lt;pre&gt;<code>if ("true".equalsIgnoreCase(value))<br /> return Boolean.TRUE;<br />else if ("false".equalsIgnoreCase(value))<br />  return Boolean.FALSE;<br />else <br />  // invalid string representation<br />  // of boolean </code>&lt;/pre&gt;</td>
    </tr>
  </tbody>
</table>

<h4 id="validationresult">ValidationResult</h4>

<p>The result of validation is returned through an instance of the
<code class="highlighter-rouge">ValidationResult</code> class. This class has the following methods:</p>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Description <br /></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">boolean hasFix()</code> <br /></td>
      <td>Whether any fix-ups (i.e., modification or replacement of input Data layer objects) have been proposed. Fixes may be proposed but not applied because fixes cannot be applied to read-only complex objects. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">boolean hasFixupReadOnlyError()</code> <br /></td>
      <td>Whether any fix-ups could not be applied because of read-only complex objects. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">Object getFixed()</code> <br /></td>
      <td>Return a fixed object. In-place fixes may or may not be possible because some objects are immutable. For example, if the schema type is “fixed” and String object is provided as the Data object, the fixed-up object that would be returned will be a ByteString. Since String and ByteString are both immutable and have different types, the fixed object will be a different object, i.e. the fix-up cannot be done in-place. <br /><br />For complex objects, the fix-ups can be applied in place. This is because the new values can replace the old values in a <code class="highlighter-rouge">DataMap</code> or <code class="highlighter-rouge">DataList</code>. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">boolean isValid()</code> <br /></td>
      <td>Whether the fixed object returns by <code class="highlighter-rouge">getFixed()</code> contains any errors. If it returns <code class="highlighter-rouge">false</code>, then the fixed object and its dependents are fixed up according to the provided schema. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">String getMessage()</code> <br /></td>
      <td>Provides details on validation and fix-up failures. Returns empty string if <code class="highlighter-rouge">isValid()</code> is <code class="highlighter-rouge">true</code> and fix-ups/validation have occurred without problems. <br /></td>
    </tr>
  </tbody>
</table>

<p>Note: Schema validation and coercion are currently explicit operations.
They are not implicitly performed when data are de-serialized as part of
remote invocations.</p>

<h2 id="the-data-template-layer">The Data Template Layer</h2>

<p>The Data Template layer provides Java type-safe access to the underlying
data stored in the Data layer. It has explicit knowledge of the schema
of the data stored. The code generator generates classes for complex
schema types that derive from base classes in this layer. The common
base of these generated is <code class="highlighter-rouge">com.linkedin.data.DataTemplate</code>. Typically,
a <code class="highlighter-rouge">DataTemplate</code> instance is an overlay or wrapper for a <code class="highlighter-rouge">DataMap</code> or
<code class="highlighter-rouge">DataList</code> instance. It allows type-safe access to the underlying data
in the <code class="highlighter-rouge">DataMap</code> or <code class="highlighter-rouge">DataList</code>. (The exception is the <code class="highlighter-rouge">FixedTemplate</code>
which is a subclass of <code class="highlighter-rouge">DataTemplate</code> for fixed schema types.)</p>

<p>The Data Template layer provides the following abstract base classes
that are used to construct Java bindings for different complex schema
types.</p>

<table>
  <thead>
    <tr>
      <th>Class</th>
      <th>Underlying Data <br /></th>
      <th>Description <br /></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">AbstractArrayTemplate</code> <br /></td>
      <td><code class="highlighter-rouge">DataList</code> <br /></td>
      <td>Base class for array types. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">DirectArrayTemplate</code> <br /></td>
      <td><code class="highlighter-rouge">DataList</code> <br /></td>
      <td>Base class for array types containing unwrapped item types, extends <code class="highlighter-rouge">AbstractArrayTemplate</code>. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">WrappingArrayTemplate</code> <br /></td>
      <td><code class="highlighter-rouge">DataList</code> <br /></td>
      <td>Base class for array types containing wrapped item types, extends <code class="highlighter-rouge">AbstractArrayTemplate</code>. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">AbstractMapTemplate</code> <br /></td>
      <td><code class="highlighter-rouge">DataMap</code> <br /></td>
      <td>Base class for map types. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">DirectMapTemplate</code> <br /></td>
      <td><code class="highlighter-rouge">DataMap</code> <br /></td>
      <td>Base class for map types containing unwrapped value types, extends <code class="highlighter-rouge">AbstractMapTemplate</code>. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">WrappingMapTemplate</code> <br /></td>
      <td><code class="highlighter-rouge">DataMap</code> <br /></td>
      <td>Base class for map types containing wrapped value types, extends <code class="highlighter-rouge">AbstractMapTemplate</code>. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">FixedTemplate</code> <br /></td>
      <td><code class="highlighter-rouge">ByteString</code> <br /></td>
      <td>Base class for fixed types. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">RecordTemplate</code> <br /></td>
      <td><code class="highlighter-rouge">DataMap</code> <br /></td>
      <td>Base class for record types. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">ExceptionTemplate</code> <br /></td>
      <td><code class="highlighter-rouge">DataMap</code> <br /></td>
      <td>Base class for record types that declared as errors. <br /></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">UnionTemplate</code> <br /></td>
      <td><code class="highlighter-rouge">DataMap</code> <br /></td>
      <td>Base class for union types. <br /></td>
    </tr>
  </tbody>
</table>

<p>The unwrapped schema types are:</p>

<ul>
  <li>int</li>
  <li>long</li>
  <li>float</li>
  <li>double</li>
  <li>boolean</li>
  <li>string</li>
  <li>bytes</li>
  <li>enum</li>
</ul>

<p>The wrapped schema types are types whose Java type-safe bindings are not
the same as their data type in the Data layer. These types require a
<code class="highlighter-rouge">DataTemplate</code> wrapper to provide type-safe access to the underlying
data managed by the Data layer. The wrapped types are:</p>

<ul>
  <li>array</li>
  <li>map</li>
  <li>fixed</li>
  <li>record and error</li>
  <li>union</li>
</ul>

<p><code class="highlighter-rouge">Enum</code> is an unwrapped type even though its Java type-safe binding is
not the same as its storage type in the Data layer. This is because enum
conversions are done through coercing to and from <code class="highlighter-rouge">java.lang.String</code> s
implemented by the Data Template layer. This is similar to coercing
between different numeric types also implemented by the Data Template
layer.</p>

<p>The following table shows the relationships among types defined in the
data schema, types stored and managed by the Data layer, and the types
of the Java binding in the Data Template
layer.</p>

<table>
  <thead>
    <tr>
      <th>Schema Type <br /></th>
      <th>Data Layer <br /></th>
      <th>Data Template Layer <br /></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>int <br /></td>
      <td><code class="highlighter-rouge">java.lang.Integer</code> <br /></td>
      <td>Coerced to <code class="highlighter-rouge">java.lang.Integer</code> or <code class="highlighter-rouge">int</code> (2) <br /></td>
    </tr>
    <tr>
      <td>long <br /></td>
      <td><code class="highlighter-rouge">java.lang.Integer</code> or <code class="highlighter-rouge">java.lang.Long</code> (1) <br /></td>
      <td>Coerced to <code class="highlighter-rouge">java.lang.Long</code> or <code class="highlighter-rouge">long</code> (2) <br /></td>
    </tr>
    <tr>
      <td>float <br /></td>
      <td><code class="highlighter-rouge">java.lang.Integer</code>, <code class="highlighter-rouge">java.lang.Long</code>, <code class="highlighter-rouge">java.lang.Float</code> or <code class="highlighter-rouge">java.lang.Double</code> (1) <br /></td>
      <td>Coerced to <code class="highlighter-rouge">java.lang.Float</code> or <code class="highlighter-rouge">float</code> (2) <br /></td>
    </tr>
    <tr>
      <td>double <br /></td>
      <td><code class="highlighter-rouge">java.lang.Integer</code>, <code class="highlighter-rouge">java.lang.Long</code>, <code class="highlighter-rouge">java.lang.Float</code> or <code class="highlighter-rouge">java.lang.Double</code> (1) <br /></td>
      <td>Coerced to <code class="highlighter-rouge">java.lang.Double</code> or <code class="highlighter-rouge">double</code> (2) <br /></td>
    </tr>
    <tr>
      <td>boolean <br /></td>
      <td><code class="highlighter-rouge">java.lang.Boolean</code> <br /></td>
      <td>Coerced to <code class="highlighter-rouge">java.lang.Boolean</code> or <code class="highlighter-rouge">boolean</code> (2) <br /></td>
    </tr>
    <tr>
      <td>string <br /></td>
      <td><code class="highlighter-rouge">java.lang.String</code> <br /></td>
      <td><code class="highlighter-rouge">java.lang.String</code> <br /></td>
    </tr>
    <tr>
      <td>bytes <br /></td>
      <td><code class="highlighter-rouge">java.lang.String</code> or <code class="highlighter-rouge">com.linkedin.data.ByteString</code> (3) <br /></td>
      <td><code class="highlighter-rouge">com.linkedin.data.ByteString</code> <br /></td>
    </tr>
    <tr>
      <td>enum <br /></td>
      <td><code class="highlighter-rouge">java.lang.String</code> <br /></td>
      <td>Generated enum class. <br /></td>
    </tr>
    <tr>
      <td>array <br /></td>
      <td><code class="highlighter-rouge">com.linkedin.data.DataList</code> <br /></td>
      <td>Generated or built-in array class. <br /></td>
    </tr>
    <tr>
      <td>map <br /></td>
      <td><code class="highlighter-rouge">com.linkedin.data.DataMap</code> <br /></td>
      <td>Generated or built-in map class. <br /></td>
    </tr>
    <tr>
      <td>fixed <br /></td>
      <td><code class="highlighter-rouge">java.lang.String</code> or <code class="highlighter-rouge">com.linkedin.data.ByteString</code> <br /></td>
      <td>Generated class that derives from <code class="highlighter-rouge">FixedTemplate</code> <br /></td>
    </tr>
    <tr>
      <td>record <br /></td>
      <td><code class="highlighter-rouge">com.linkedin.data.DataMap</code> <br /></td>
      <td>Generated class that derives from <code class="highlighter-rouge">RecordTemplate</code> <br /></td>
    </tr>
    <tr>
      <td>error <br /></td>
      <td><code class="highlighter-rouge">com.linkedin.data.DataMap</code> <br /></td>
      <td>Generated class that derives from <code class="highlighter-rouge">ExceptionTemplate</code> <br /></td>
    </tr>
    <tr>
      <td>union <br /></td>
      <td><code class="highlighter-rouge">com.linkedin.data.DataMap</code> <br /></td>
      <td>Generated class that derives from <code class="highlighter-rouge">UnionTemplate</code> <br /></td>
    </tr>
  </tbody>
</table>

<p>(1) When a JSON object is deserialized, the actual schema type is not
known. Typically, the smallest sized type that can represent the
deserialized value will be used to store the value in-memory.<br />
(2) Depending on the method, un-boxed types will be preferred to boxed
types if applicable and the input or output arguments can never be
null.<br />
(3) When a JSON object is deserialized, the actual schema type is not
known for bytes and fixed. Values of bytes and fixed types are stored as
strings as serialized representation is a string. However, <code class="highlighter-rouge">ByteString</code>
is an equally valid Java type for these schema types.</p>

                     </div>
                   </div>
</div>



      <footer class="page-footer">
    <div class="container">
      <div class="row">
        <div class="col s6">
          <h5>Rest.li</h5>
          <p class="text-lighten-4">Rest.li is an open source REST framework for building robust, scalable RESTful architectures using type-safe bindings and asynchronous, non-blocking IO. Rest.li fills a niche for applying RESTful principles at scale with an end-to-end developer workflow for building REST APIs, which promotes clean REST practices, uniform interface design and consistent data modeling.</p>
        </div>
        <div class="col s5 offset-s1">
          <h5 class="black-text">Community</h5>
          <ul>
              <li>GitHub <a class="" href="https://github.com/linkedin/rest.li">Rest.li</a></li>
              <li>LinkedIn <a class="" href="https://www.linkedin.com/groups/4855943/">Rest.li Group</a></li>
            <li>Follow us on twitter: <a class="" href="https://twitter.com/rest_li"> @rest_li</a></li>
            <li>Issue Tracking: <a class="" href="https://github.com/linkedin/rest.li/issues">GitHub issue tracking</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="footer-copyright">
        <div class="container">
            <div class="row">
              <div class="col s6">
                      Copyright 2018 LinkedIn Corporation </br>
                      This work is licensed under a <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.  </br>
                      For clarity, no trademark is licensed.
                      </br></br>
              </div>
              <div class="col s5 offset-s1">
                      This work was made by using Jekyll (and a Jekyll Starter Template)</br>
                      <a target="_blank" href="https://github.com/macrod68/jekyll-materialize-starter-template">https://github.com/macrod68/jekyll-materialize-starter-template</a></br>
                      Copyright © 2017 Marco Damiani. Powered by <a target="_blank" href="http://jekyllrb.com/">Jekyll</a></br>
                      License:<a target="_blank" href="https://opensource.org/licenses/MIT">MIT</a>
              </div>
            </div>
        </div>
    </div>
    <script>
      $(function() {
        return $("h2, h3, h4, h5, h6").each(function(i, el) {
          var $el, icon, id;
          $el = $(el);
          id = $el.attr('id');
          icon = '<i class="fa fa-link"></i>';
          if (id) {
            return $el.append($("<a />").addClass("header-link").attr("href", "#" + id).html(icon));
          }
        });
      });
      </script>
</footer>

      
    <!--  Scripts-->                                                                               
<script src="/rest.li/assets/js/jquery.min.js"></script>
<script src="/rest.li/assets/js/materialize.min.js"></script>
<script src="/rest.li/assets/js/init.js"></script>

  </body>

</html>
